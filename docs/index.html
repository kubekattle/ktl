<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ktl — Kubernetes observability toolkit</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <main class="chrome">
    <section class="hero">
      <div class="badge">CLI-first Kubernetes visibility</div>
      <h1>ktl keeps incidents debuggable straight from your terminal.</h1>
      <p>ktl starts as a log tailer and turns into a multipurpose operations console: informer-backed discovery, node and pod log merging,
         HTML diagnostics, capture tooling, and packaging workflows without leaving kubectl territory.</p>
      <div class="cta-row">
        <a class="cta" href="https://github.com/antonkrylov/ktl">View on GitHub</a>
        <a class="secondary" href="https://github.com/antonkrylov/ktl#install">Install in minutes</a>
      </div>
    </section>

    <section class="section">
      <h2><span class="glyph glyph-neutral" data-icon="W" aria-hidden="true"></span>Why engineers reach for ktl</h2>
      <p class="lead">Highlights borrowed directly from the README: fast startup, readable output, multi-source context, and shareable sessions.</p>
      <div class="grid">
        <div class="card">
          <h3>Instant discovery</h3>
          <div class="value">&lt; 1s startup</div>
          <p>Informer-backed pod indexing keeps the CLI responsive across thousands of workloads.</p>
        </div>
        <div class="card">
          <h3>Readable output</h3>
          <div class="value">templates + JSON</div>
          <p>Color-coded namespaces, Go templates, JSON passthrough, and regex highlighting preserve signal during firefights.</p>
        </div>
        <div class="card">
          <h3>Multi-source visibility</h3>
          <div class="value">pods + nodes</div>
          <p>Merge kubelet/syslog streams with pod logs using <code>--node-logs</code>, <code>--node-log-all</code>, or <code>--node-log-only</code>.</p>
        </div>
        <div class="card">
          <h3>Shareable mirrors</h3>
          <div class="value">web & ws</div>
          <p>Run <code>--ui</code> / <code>--ws-listen</code> to broadcast the same session to browsers or dashboards.</p>
        </div>
      </div>
    </section>

    <section class="section">
      <h2><span class="glyph glyph-neutral" data-icon="L" aria-hidden="true"></span>Log tailing recipes from examples.md</h2>
      <p class="lead">Copy-paste these snippets to cover the most common on-call moments.</p>
      <div class="features">
        <article class="snippet-card">
          <h3>Whole cluster snapshot</h3>
          <p>Tail every namespace without waiting on kubectl restarts.</p>
<pre><code>ktl logs . --all-namespaces --tail=10</code></pre>
        </article>
        <article class="snippet-card">
          <h3>Prod pods with highlights</h3>
          <p>Focus on a namespace and bubble up repeated errors inline.</p>
<pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout</code></pre>
        </article>
        <article class="snippet-card">
          <h3>Selector + events combo</h3>
          <p>Filter by label, pod container, and stream events for rollout sleuthing.</p>
<pre><code>ktl logs . \
  --namespace canary \
  --selector app=checkout \
  --container 'proxy.*' \
  --events</code></pre>
        </article>
        <article class="snippet-card">
          <h3>Web + WebSocket mirror</h3>
          <p>Let teammates watch the same output with zero extra tooling.</p>
<pre><code>ktl logs checkout \
  --namespace prod-payments \
  --ui :8080 \
  --ws-listen :9080</code></pre>
          <div class="live-mirror-callout">
            <p class="mirror-note">Browser mirror preview</p>
            <div class="mirror-preview">
              <section class="panel log-preview" aria-label="Live log preview">
                <div class="log-preview-header">
                  <span>Live log stream</span>
                  <span>128 entries</span>
                </div>
                <div class="log-preview-feed">
                  <article class="log-entry">
                    <div class="meta">
                      <span class="chip-inline">● pod</span>
                      <span>14:03:12 · prod-payments/checkout-7c8d8c8c7b [proxy]</span>
                    </div>
                    <div class="log-line">POST /charge latency=212ms jitter=32ms</div>
                  </article>
                  <article class="log-entry">
                    <div class="meta">
                      <span class="chip-inline">⚠ node</span>
                      <span>14:03:18 · prod-payments/ip-10-0-18-21 [kubelet]</span>
                    </div>
                    <div class="log-line">Image pull throttled · retrying in 5s</div>
                  </article>
                </div>
              </section>
              <aside class="panel stat-panel" aria-label="Session stats">
                <h4>Session stats</h4>
                <div class="stat-grid">
                  <div class="stat-card"><span>Lines</span><strong>128</strong></div>
                  <div class="stat-card"><span>Namespaces</span><strong>4</strong></div>
                  <div class="stat-card"><span>Pods</span><strong>18</strong></div>
                </div>
                <p class="stat-updated">Last update <strong>14:03:18</strong></p>
              </aside>
            </div>
          </div>
        </article>
        <article class="snippet-card">
          <h3>Container builds in the browser</h3>
          <p>Visualize multi-stage Dockerfile + compose builds with the same mirror UI as <code>--ui</code>.</p>
<pre><code>ktl build . \
  --tag ktl.local/app:dev \
  --ui :7080</code></pre>
          <div class="live-mirror-callout">
            <p class="mirror-note">Build mirror preview</p>
            <div class="mirror-preview build-preview">
              <section class="panel log-preview" aria-label="Build progress">
                <div class="log-preview-header">
                  <span>Build stages</span>
                  <span>4 workers</span>
                </div>
                <div class="log-preview-feed">
                  <article class="log-entry build-entry done">
                    <div class="meta">
                      <span class="chip-inline">Dockerfile</span>
                      <span>stage checkout</span>
                    </div>
                    <div class="log-line"><strong>Built linux/amd64</strong>
RUN npm ci --cache /cache/npm</div>
                  </article>
                  <article class="log-entry build-entry pending">
                    <div class="meta">
                      <span class="chip-inline">Compose</span>
                      <span>service api · registry push</span>
                    </div>
                    <div class="log-line"><strong>Publishing ktl-e2e/api:latest</strong>
docker-container://ktl-buildkit</div>
                  </article>
                  <article class="log-entry build-entry warn">
                    <div class="meta">
                      <span class="chip-inline">Cache</span>
                      <span>hit rate 82%</span>
                    </div>
                    <div class="log-line"><strong>Cache import fell back to local</strong>
type=registry,ref=cache/prod</div>
                  </article>
                </div>
              </section>
              <aside class="panel stat-panel" aria-label="Build stats">
                <h4>Build stats</h4>
                <div class="stat-grid">
                  <div class="stat-card"><span>Stages</span><strong>12</strong></div>
                  <div class="stat-card"><span>Services</span><strong>5</strong></div>
                  <div class="stat-card"><span>Duration</span><strong>2m 14s</strong></div>
                </div>
                <p class="stat-updated">Last update <strong>21:18:04</strong></p>
                <ul class="build-hints">
                  <li>Compose profiles + <code>--mode auto</code> auto-detect Dockerfiles vs stacks.</li>
                  <li>Sandbox runtime runs every build inside the bundled jail; disable via <code>KTL_SANDBOX_DISABLE=1</code> only when debugging.</li>
                  <li>Specify <code>--authfile ~/.docker/config.json</code> to mirror pushes for private registries.</li>
                </ul>
              </aside>
            </div>
          </div>
        </article>
        <article class="snippet-card">
          <h3>Events-only rollouts</h3>
          <p>Watch Kubernetes events for rollout pods without mixing log lines.</p>
<pre><code>ktl logs 'rollout-.*' --namespace blue \
  --events-only --tail=0</code></pre>
        </article>
        <article class="snippet-card">
          <h3>Node + pod log merge</h3>
          <p>Stream kubelet/syslog alongside pods to expose noisy nodes.</p>
<pre><code>ktl logs 'checkout-.*' --namespace prod-payments \
  --node-logs \
  --node-log /var/log/kubelet.log</code></pre>
        </article>
      </div>
    </section>

    <section class="section">
      <h2><span class="glyph glyph-neutral" data-icon="D" aria-hidden="true"></span>Diagnostics and recovery workflows</h2>
      <div class="summary">
        <ul>
          <li><span><span class="glyph glyph-neutral" data-icon="Q" aria-hidden="true"></span>ktl diag quotas | nodes | storage</span><small>Compare requests, limits, pressure, and PVC state without leaving the terminal.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="R" aria-hidden="true"></span>ktl diag resources</span><small>Surface per-container requests/limits plus live metrics to chase noisy pods.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="N" aria-hidden="true"></span>ktl diag cronjobs | network | podsecurity | priorities</span><small>Bring schedule summaries, readiness validation, and policy checks into one report.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="H" aria-hidden="true"></span>ktl diag report --html</span><small>Render the same namespace posture you see in incidents into a portable artifact.</small></li>
          <li><span><span class="glyph glyph-pass" data-icon="H" aria-hidden="true"></span>ktl diag health</span><small>Fail CI when checks degrade; produces JSON so pipelines can consume the results.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="C" aria-hidden="true"></span>ktl logs capture *</span><small>Create, replay, and diff capture tarballs for offline investigations.</small></li>
        </ul>
      </div>
    </section>

    <section class="section" id="scorelines">
      <h2><span class="glyph glyph-neutral" data-icon="S" aria-hidden="true"></span>Scorelines from the CLI</h2>
      <p class="lead">Track how ktl quantifies rollouts, health checks, and capture sessions—then click a preset to copy the exact command.</p>
      <div class="scoreboard">
        <article class="score-card pass">
          <div class="glyph glyph-large glyph-pass" data-icon="P" aria-hidden="true"></div>
          <div class="score-value">96%</div>
          <p>Namespaces passing `ktl diag health` in the last run.</p>
          <div class="score-bar"><span style="width:96%"></span></div>
          <small>Source: `ktl diag health --output json`</small>
        </article>
        <article class="score-card warn">
          <div class="glyph glyph-large glyph-warn" data-icon="W" aria-hidden="true"></div>
          <div class="score-value">68%</div>
          <p>PVCs within quota budget from `ktl diag storage`.</p>
          <div class="score-bar"><span style="width:68%;background:linear-gradient(90deg,#fbbf24,#fb923c)"></span></div>
          <small>Source: `ktl diag storage --namespace prod`</small>
        </article>
        <article class="score-card fail">
          <div class="glyph glyph-large glyph-fail" data-icon="X" aria-hidden="true"></div>
          <div class="score-value">3</div>
          <p>Blocking alerts raised by `ktl logs capture diff` for the latest release.</p>
          <div class="score-bar"><span style="width:30%;background:linear-gradient(90deg,#ef4444,#dc2626)"></span></div>
          <small>Source: `ktl logs capture diff old.tgz new.tgz`</small>
        </article>
      </div>
      <div class="score-controls">
        <button type="button" class="active" data-command="ktl diag health --output json" data-label="Health checks">Health checks</button>
        <button type="button" data-command="ktl diag storage --namespace prod-payments" data-label="Storage pressure">Storage pressure</button>
        <button type="button" data-command="ktl logs capture diff release_A.tgz release_B.tgz" data-label="Capture diff">Capture diff</button>
        <button type="button" data-command="ktl analyze traffic --target checkout:proxy --filter host=payments" data-label="Traffic trace">Traffic trace</button>
      </div>
      <div class="command-preview">
<pre><code id="commandPreview">ktl diag health --output json</code></pre>
      </div>
    </section>

    <section class="section">
      <h2><span class="glyph glyph-neutral" data-icon="P" aria-hidden="true"></span>Packaging, databases, and advanced tooling</h2>
      <div class="summary">
        <ul>
          <li><span><span class="glyph glyph-neutral" data-icon="I" aria-hidden="true"></span>ktl package images | manifests</span><small>Bundle an entire Helm chart (manifests + images) for air-gapped rollout review.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="A" aria-hidden="true"></span>ktl app package*</span><small>Produce signed `.k8s` archives with manifests, SBOM, provenance, and Ed25519 verification.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="D" aria-hidden="true"></span>ktl deploy plan</span><small>Dry-run Helm upgrades, summarize creates/updates/deletes, and export HTML for reviewers.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="T" aria-hidden="true"></span>ktl analyze traffic | syscalls</span><small>Inject tcpdump or strace helpers with host-to-host filtering and summarized output.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="B" aria-hidden="true"></span>ktl db backup | restore</span><small>Capture or restore PostgreSQL dumps straight from pods with drop-db support.</small></li>
          <li><span><span class="glyph glyph-neutral" data-icon="R" aria-hidden="true"></span>ktl deploy plan --html / ktl diag report --html</span><small>Share the same reports with stakeholders or incident channels.</small></li>
        </ul>
      </div>
    </section>

    <section class="section longform-preview" id="longform">
      <h2><span class="glyph glyph-neutral" data-icon="L" aria-hidden="true"></span>Развёрнутый обзор (RU)</h2>
      <p class="lead">100-страничный HTML-гайд на русском языке с рецептами из README, examples и DESIGN.md для печати и оффлайн-раздачи.</p>
      <div class="longform-actions">
        <a class="cta" href="longform/index.html" target="_blank" rel="noopener">Открыть гайд</a>
        <a class="secondary" href="longform/index.html#page-001" target="_blank" rel="noopener">Первая страница</a>
      </div>
      <div class="longform-embed" role="presentation" aria-hidden="true">
        <iframe src="longform/index.html#page-001" title="ktl longform overview (RU)" loading="lazy"></iframe>
      </div>
    </section>

    <footer class="footer">
      Made with care by the ktl team · Need help? Open an issue on <a href="https://github.com/antonkrylov/ktl/issues">GitHub</a>.
    </footer>
  </main>
  <script>
    const scoreButtons = document.querySelectorAll('.score-controls button');
    const preview = document.getElementById('commandPreview');
    scoreButtons.forEach((button) => {
      button.addEventListener('click', () => {
        scoreButtons.forEach((btn) => btn.classList.remove('active'));
        button.classList.add('active');
        preview.textContent = button.dataset.command;
      });
    });
  </script>
</body>
</html>
