<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>ktl — расширенный обзор возможностей</title>
  <style>
:root {
  --surface: rgba(255,255,255,0.9);
  --surface-soft: rgba(255,255,255,0.82);
  --border: rgba(15,23,42,0.12);
  --text: #0f172a;
  --muted: rgba(15,23,42,0.65);
  --accent: #2563eb;
  --chip-bg: rgba(37,99,235,0.08);
  --chip-text: #1d4ed8;
  --warn: #fbbf24;
  --fail: #ef4444;
  --sparkline-color: #0ea5e9;
}
* {
  box-sizing: border-box;
}
body {
  margin: 0;
  font-family: "SF Pro Display", "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: radial-gradient(circle at top, #ffffff 0%, #dce3f1 100%);
  color: var(--text);
  line-height: 1.6;
}
.chrome {
  max-width: 1200px;
  margin: 0 auto;
  padding: 48px 56px 72px;
}
header h1 {
  font-size: 2.8rem;
  font-weight: 600;
  letter-spacing: -0.04em;
  margin: 0;
}
header .subtitle {
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.2em;
  margin-top: 0.4rem;
}
.panel {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 28px;
  padding: 32px;
  margin-bottom: 32px;
  box-shadow: 0 40px 80px rgba(16,23,36,0.12);
  backdrop-filter: blur(18px);
}
.page-header {
  display: flex;
  justify-content: space-between;
  gap: 24px;
  flex-wrap: wrap;
  align-items: baseline;
}
.page-index {
  font-weight: 600;
  color: var(--muted);
  letter-spacing: 0.18em;
  text-transform: uppercase;
}
.page-insight {
  color: var(--muted);
  margin: 0;
}
.page h2 {
  margin: 0.2rem 0 0.6rem;
}
.chip-row {
  display: flex;
  gap: 0.6rem;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}
.chip {
  background: var(--chip-bg);
  color: var(--chip-text);
  padding: 0.25rem 0.85rem;
  border-radius: 999px;
  font-size: 0.78rem;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}
.lede {
  font-size: 1.1rem;
  font-weight: 500;
}
.bullet-list {
  padding-left: 1.2rem;
}
.page-flex {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
  margin-top: 1.5rem;
}
.page-block {
  background: var(--surface-soft);
  border-radius: 24px;
  padding: 24px;
  border: 1px solid var(--border);
}
.page-block h3, .page-block h4 {
  margin-top: 0;
}
pre {
  background: #0f172a;
  color: #f8fafc;
  padding: 16px;
  border-radius: 16px;
  overflow-x: auto;
  font-size: 0.9rem;
}
.score-card {
  margin-top: 24px;
  border-radius: 24px;
  padding: 24px;
  background: linear-gradient(125deg, #bbf7d0, #86efac);
  color: #052e16;
}
.score-card.warn {
  background: linear-gradient(125deg, #fef3c7, #fde68a);
  color: #78350f;
}
.score-card.fail {
  background: linear-gradient(125deg, #fee2e2, #fecdd3);
  color: #7f1d1d;
}
.score-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  font-size: 0.8rem;
}
.score-value {
  font-size: 2rem;
  margin: 0.4rem 0;
}
.score-copy {
  margin: 0;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin: 32px 0;
}
.card {
  background: var(--surface-soft);
  border-radius: 24px;
  padding: 24px;
  border: 1px solid var(--border);
}
.card span {
  text-transform: uppercase;
  color: var(--muted);
  letter-spacing: 0.18em;
  font-size: 0.75rem;
}
.card strong {
  font-size: 1.8rem;
  display: block;
}
.card p {
  margin: 0.5rem 0 0;
}
@media print {
  body {
    background: #ffffff;
  }
  .panel {
    box-shadow: none;
    border: 1px solid #000;
    page-break-inside: avoid;
  }
  .page {
    page-break-after: always;
  }
  .chip-row, pre {
    border: 1px solid #000;
  }
}
</style>
</head>
<body>
  <div class="chrome">
    <header>
      <h1>ktl — операционный навигатор для Kubernetes</h1>
      <p class="subtitle">Документ подготовлен на основе README.md, examples.md и правил DESIGN.md</p>
    </header>
    
<div class="grid hero-cards">
  <div class="card">
    <span>Фокус</span>
    <strong>Глубокие обзоры ktl</strong>
    <p>Построено на README.md и examples.md</p>
  </div>
  <div class="card">
    <span>Длина</span>
    <strong>100 страниц</strong>
    <p>Каждый блок печатается на отдельном листе</p>
  </div>
  <div class="card">
    <span>Обновлено</span>
    <strong>2025-12-08 04:53</strong>
    <p>Актуальная сводка для инженерных команд</p>
  </div>
</div>

    
    <section class="panel page" id="page-001">
      <div class="page-header">
        <span class="page-index">Страница 001</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>Молниеносный просмотр логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span><span class="chip">Copy toast</span>
      </div>
      <p class="lede">Информеры Kubernetes позволяют ktl находить подходящие поды менее чем за секунду, поэтому инженеры получают поток логов сразу после ввода запроса.</p>
      <p>Команда `ktl logs` сочетает поддержку регулярных выражений, селекторов и контекстных подсказок, что делает её более гибкой заменой стандартного `kubectl logs`. Набор флагов `--highlight`, `--events`, `--selector` и `--container` помогает формировать точные выборки для сценария «Стабилизация checkout в prod-payments».</p>
      <ul class="bullet-list"><li>Поддержка `--since`, `--tail` и `--follow=false` упрощает анализ ретроспективных окон.</li><li>Потоки можно преобразовать в JSON (`--json`, `--output extjson`) для последующей автоматизации.</li><li>Шаблоны Go (`--template`, `--template-file`) позволяют собирать структурированные отчёты прямо в терминале.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-002">
      <div class="page-header">
        <span class="page-index">Страница 002</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Объединение подовых и узловых логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span><span class="chip">Print-safe</span>
      </div>
      <p class="lede">ktl одновременно подхватывает kubelet и системные журналы, поэтому графики инцидента дополняются деталями с нод без отдельного ssh.</p>
      <p>Флаги `--node-logs`, `--node-log /var/log/kubelet.log`, `--node-log-all` и `--node-log-only` раскрывают то, что происходило на инфраструктурном уровне во время сценария «Построение posture-отчёта». Это экономит минуты на переключение контекстов и устраняет догадки об источнике деградации.</p>
      <ul class="bullet-list"><li>При отсутствии совпадающих подов `--node-log-all` продолжает поток от нод, чтобы не терять симптоматиику.</li><li>Фильтры по namespace и контейнерам остаются активными, даже когда добавлены системные файлы.</li><li>Сочетание с `--events` позволяет видеть kubelet-события и системные логи синхронно.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-003">
      <div class="page-header">
        <span class="page-index">Страница 003</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>Совместные зеркала HTML и WebSocket</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">HTML зеркала</span><span class="chip">Vendoring</span><span class="chip">Helm plan</span>
      </div>
      <p class="lede">Любой терминальный запуск `ktl logs` можно расшарить через браузер или WebSocket, не копируя команды коллегам.</p>
      <p>Флаги `--ui :8080` и `--ws-listen :9080` создают зеркала, где вся подсветка и фильтры остаются управляемыми инициатором. Для сценария «Профилирование syscall» это означает, что SRE-команда, бизнес и боты наблюдают за тем же стеком данных без дублирования нагрузки на кластер.</p>
      <ul class="bullet-list"><li>Зрители не могут изменять фильтры, поэтому одна точка правды сохраняется автоматически.</li><li>Сессии можно архивировать напрямую из браузера, сохраняя хронологию инцидента.</li><li>WS-поток легко потребляется CI-ботами, которые реагируют на ключевые слова.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-004">
      <div class="page-header">
        <span class="page-index">Страница 004</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>Диагностический арсенал</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">WS трансляция</span><span class="chip">PG backup</span><span class="chip">Diff deployments</span>
      </div>
      <p class="lede">`ktl diag` покрывает квоты, CronJob, PodSecurity, storage и многое другое без написания скриптов.</p>
      <p>Команды `ktl diag quotas`, `ktl diag nodes`, `ktl diag storage`, `ktl diag cronjobs`, `ktl diag network` и `ktl diag podsecurity` формируют готовые таблицы. В сценарии «CI/CD контроль» они помогают быстро найти сдерживающий фактор и подготовить артефакты для постмортема.</p>
      <ul class="bullet-list"><li>`ktl diag resources` объединяет requests/limits с live metrics.</li><li>`ktl diag priorities` подсвечивает preemption и PriorityClasses.</li><li>`ktl diag report --html` строит визуальные scorecards по тем же данным.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-005">
      <div class="page-header">
        <span class="page-index">Страница 005</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Планирование деплоев</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span>
      </div>
      <p class="lede">`ktl deploy plan` визуализирует создаваемые, изменяемые и удаляемые манифесты до запуска установки.</p>
      <p>Команда сравнивает chart + values с текущим кластером и отмечает объекты, влияющие на поды. В рамках «Поддержка нескольких kubeconfig» это избавляет от непредсказуемых рестартов и ускоряет согласования с командами сопровождения.</p>
      <ul class="bullet-list"><li>Флаги `--chart`, `--release`, `--namespace`, `--values` повторяют семантику Helm.</li><li>HTML вывод (`--html --output dist/plan.html`) превращает результат в артефакт для стейкхолдеров.</li><li>Diff-формат подсвечивает изменения образов, env и PDB.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-006">
      <div class="page-header">
        <span class="page-index">Страница 006</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>Drift и снепшоты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Quota heatmaps</span><span class="chip">CI gate</span><span class="chip">Node+pod журналы</span>
      </div>
      <p class="lede">`ktl logs drift watch` и `ktl diag snapshot save` непрерывно отслеживают расхождения манифестов.</p>
      <p>В сценарии «Формирование знаний» ktl фиксирует контрольные точки, а затем подсвечивает новые ReplicaSet, изменения хэшей и рестарты. Это основа для регрессной аналитики и аудита.</p>
      <ul class="bullet-list"><li>`ktl logs capture` записывает логи и события в переносимые tarball/SQLite артефакты.</li><li>`ktl logs capture replay` переигрывает инциденты офлайн.</li><li>Report HTML может сравнивать два снепшота (`--compare-left`, `--compare-right`).</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-007">
      <div class="page-header">
        <span class="page-index">Страница 007</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>SQLite-пакеты приложений</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PodSecurity</span><span class="chip">Context aware</span><span class="chip">HTML зеркала</span>
      </div>
      <p class="lede">`ktl app package` собирает манифесты, образы, SBOM и аттестации в детерминированный `.k8s` файл.</p>
      <p>Подход SQLite гарантирует, что всё содержание доступно через стандартные `SELECT`. Для «Стабилизация checkout в prod-payments» это означает единый артефакт для air-gap кластеров и цепочки поставки.</p>
      <ul class="bullet-list"><li>Таблицы `metadata`, `manifests`, `images`, `attachments` покрывают весь спектр данных.</li><li>`ktl app package verify` проверяет Ed25519 подпись и вложенные SLSA/SBOM.</li><li>`ktl app unpack` извлекает снимки в файловую структуру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-008">
      <div class="page-header">
        <span class="page-index">Страница 008</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Контроль поставки</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CronJob guard</span><span class="chip">Color tokens</span><span class="chip">WS трансляция</span>
      </div>
      <p class="lede">Архив `.k8s` содержит provenance, лицензии и SBOM, поэтому аудиторы не требуют дополнительных выгрузок.</p>
      <p>В сценарии «Построение posture-отчёта» мы просто выполняем SQL-запросы к таблице `attachments`, чтобы доказать происхождение и состав релиза. Такая прозрачность редко встречается в проприетарных форматах.</p>
      <ul class="bullet-list"><li>SLSA JSON фиксирует BuildKit, git SHA и параметры запуска.</li><li>SBOM на базе SPDX 2.3 связывает каждый digest с лицензией.</li><li>License summary позволяет классифицировать copyleft/пермиссивные пакеты в секунды.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-009">
      <div class="page-header">
        <span class="page-index">Страница 009</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>Вендоринг без дополнительных CLI</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Capture replay</span><span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span>
      </div>
      <p class="lede">`ktl app vendor` встраивает возможности vendir, поэтому синхронизация сторонних чартов происходит в одном бинарнике.</p>
      <p>В сценарии «Профилирование syscall» мы поддерживаем `vendir.yml`/`vendir.lock.yml`, подкачиваем Helm-чарты, git-каталоги и артефакты GitHub Releases без отдельного CLI и сложных установок.</p>
      <ul class="bullet-list"><li>Поддерживаются `--directory`, мульти-конфигурации (`-f`), `--locked` режим.</li><li>Уважает `VENDIR_CACHE_DIR`, `VENDIR_GITHUB_API_TOKEN` и другие env.</li><li>Результаты складываются в `testdata/charts/` для детерминированных тестов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-010">
      <div class="page-header">
        <span class="page-index">Страница 010</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>PostgreSQL резервные копии</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Drift watch</span><span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span>
      </div>
      <p class="lede">`ktl db backup` и `ktl db restore` работают прямо из подов, исключая ручные `kubectl exec`.</p>
      <p>В сценарии «CI/CD контроль» инженер снимает дампы всех БД (если флаг `--database` не задан), а затем восстанавливает их с помощью `--drop-db` и `--yes` без скачивания внешних утилит.</p>
      <ul class="bullet-list"><li>Архивы автоматически сжимаются и именуются по времени.</li><li>Восстановление показывает прогресс по каждой базе.</li><li>Можно направлять выгрузки в каталог `backups/` или внешний bucket.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-011">
      <div class="page-header">
        <span class="page-index">Страница 011</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Traffic forensics</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">SQLite архив</span><span class="chip">Timeline</span><span class="chip">PodSecurity</span>
      </div>
      <p class="lede">`ktl analyze traffic` добавляет эфемерный контейнер и снимает tcpdump в сетевом неймспейсе целевого пода.</p>
      <p>Настройки `--between`, `--filter`, `--interface`, `--image` и пресеты `--bpf dns|handshake|postgres` создают точный профиль пакетов для «Поддержка нескольких kubeconfig» без модификации образов.</p>
      <ul class="bullet-list"><li>Собственный образ можно указать через `--image`.</li><li>Несколько `--target` позволяют захватывать разные неймспейсы.</li><li>Результаты потока пригодны для SIEM и внутреннего мониторинга.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Утилизация узлов</h5>
          <span class="score-delta">+12%</span>
        </div>
        <p class="score-value">75%</p>
        <p class="score-copy">Скачок CPU на новых worker-нодаx требует `ktl diag nodes`.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-012">
      <div class="page-header">
        <span class="page-index">Страница 012</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>Syscall профилирование</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">SBOM встроен</span><span class="chip">Filter chips</span><span class="chip">CronJob guard</span>
      </div>
      <p class="lede">`ktl analyze syscalls` подключает strace/bcc к шумным подам и агрегирует топ системных вызовов.</p>
      <p>Флаги `--profile-duration`, `--match`, `--top` и `--target-pid` обеспечивают гибкость, а вывод можно переключить в JSON для пайплайнов. Это позволяет в сценарии «Формирование знаний» определить, где приложение тратит время.</p>
      <ul class="bullet-list"><li>`--format json` облегчает автоматический парсинг.</li><li>Профиль по умолчанию длится 30 секунд и покрывает весь под.</li><li>`--image-pull-policy` и `--privileged` управляют безопасностью запуска.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>PodSecurity соответствие</h5>
          <span class="score-delta">-6% после миграции</span>
        </div>
        <p class="score-value">71%</p>
        <p class="score-copy">Новые namespace не получили требуемые метки baseline.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-013">
      <div class="page-header">
        <span class="page-index">Страница 013</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>Scorecards и отчёты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Ed25519 подпись</span><span class="chip">applyFilters()</span><span class="chip">Capture replay</span>
      </div>
      <p class="lede">`ktl diag report --html` формирует визуальные панели здоровья с фильтрами, таймлайном и runbook-картами.</p>
      <p>Именно здесь вступают в игру токены из DESIGN.md: `--surface`, `.panel`, `.score-card`, `.insight-stack`. Для «Стабилизация checkout в prod-payments» отчёт показывает квоты, PodSecurity, дельты SLO и выдаёт команды «Copy command».</p>
      <ul class="bullet-list"><li>`?print` режим упрощает PDF.</li><li>Фильтры по readiness/restars/violations ускоряют обзоры.</li><li>История сохраняется в `~/.config/ktl/scorecard/history.db`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>CI health gate</h5>
          <span class="score-delta">+8%</span>
        </div>
        <p class="score-value">92% проходов</p>
        <p class="score-copy">Автоматический `diag health` блокирует релизы до устранения предупреждений.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-014">
      <div class="page-header">
        <span class="page-index">Страница 014</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Конфигурация и палитры</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">tcpdump preset</span><span class="chip">Copy toast</span><span class="chip">Drift watch</span>
      </div>
      <p class="lede">ktl поддерживает YAML-конфигурации (`~/.config/ktl/config.yaml`) и переменные окружения `KTL_*`.</p>
      <p>В сценарии «Построение posture-отчёта» команда может зафиксировать namespace, дефолтные подсветки, кастомные цвета подов (`pod-colors`) и форматы времени, чтобы стандартизировать вывод.</p>
      <ul class="bullet-list"><li>`container-colors` поддерживает комбинации с подчёркиванием.</li><li>`--timezone` и `--timestamp-format` улучшают кросс-региональные расследования.</li><li>`--color=never` полезен для CI и логгеров.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование квот CPU</h5>
          <span class="score-delta">+9% к прошлому релизу</span>
        </div>
        <p class="score-value">82%</p>
        <p class="score-copy">Нагрузка растёт быстрее плана; требуется контроль горизонтального масштабирования.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-015">
      <div class="page-header">
        <span class="page-index">Страница 015</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>RBAC-aware режим</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">strace JSON</span><span class="chip">Print-safe</span><span class="chip">SQLite архив</span>
      </div>
      <p class="lede">ktl наследует разрешения kubeconfig и аккуратно репортит отказанные вызовы.</p>
      <p>Это критично в сценарии «Профилирование syscall», где разные команды работают в общих кластерах. CLI сообщает, какие API вернули `Forbidden`, помогая обновить ClusterRole без догадок.</p>
      <ul class="bullet-list"><li>`--kubeconfig` и `--context` доступны на всех командах.</li><li>`KTL_CONFIG` позволяет быстро переключать профили.</li><li>Документация в `docs/config.all-options.yaml` даёт полный реестр флагов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Своевременность отчётов</h5>
          <span class="score-delta">-3%</span>
        </div>
        <p class="score-value">78%</p>
        <p class="score-copy">Не все команды выгружают posture PDF в срок.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-016">
      <div class="page-header">
        <span class="page-index">Страница 016</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>Capture и реплей логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Vendoring</span><span class="chip">Helm plan</span><span class="chip">SBOM встроен</span>
      </div>
      <p class="lede">`ktl logs capture` записывает события, логи и состояния workloads в переносимые архивы.</p>
      <p>Для «CI/CD контроль» мы фиксируем пяти минутку (`--duration`) или ручной диапазон, затем `ktl logs capture replay` показывает материал офлайн, а `ktl logs capture diff` сравнивает метаданные разных попыток.</p>
      <ul class="bullet-list"><li>Артефакты можно хранить в S3 и делиться с партнёрами.</li><li>Diff подчёркивает изменения подов, флагов и namespaces.</li><li>Повторное воспроизведение доступно без подключения к кластеру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-017">
      <div class="page-header">
        <span class="page-index">Страница 017</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Сбор метрик top</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PG backup</span><span class="chip">Diff deployments</span><span class="chip">Ed25519 подпись</span>
      </div>
      <p class="lede">`ktl diag top --all-namespaces` и `ktl top` дают быстрый обзор CPU/Memory без kubectl.</p>
      <p>В сценарии «Поддержка нескольких kubeconfig» отчёт выводит лидеров по потреблению и выявляет runaway контейнеры. Опции сортировки и label selector поддерживают точечные фокусы.</p>
      <ul class="bullet-list"><li>`--sort-cpu` и `--sort-memory` ускоряют разбор.</li><li>`-A` даёт кластерный обзор, `-n` фиксирует пространство имён.</li><li>Команда повторяет UX `kubectl top`, но доступна всегда там, где установлен ktl.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-018">
      <div class="page-header">
        <span class="page-index">Страница 018</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>BuildKit interactive build</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span>
      </div>
      <p class="lede">`ktl build` с `--interactive` позволяет провалиться внутрь Dockerfile шага прямо при сбое.</p>
      <p>Для «Формирование знаний» мы используем `--interactive-shell "bash -l"`, чтобы воспроизвести окружение BuildKit и пофиксить образ до повторного запуска CI.</p>
      <ul class="bullet-list"><li>Поддерживаются разные GOOS/GOARCH через Makefile таргеты.</li><li>`testdata/build/interactive/Dockerfile` служит репро для обучения.</li><li>Флаг требует TTY, поэтому подходит для локальных терминалов или `ssh -tt`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-019">
      <div class="page-header">
        <span class="page-index">Страница 019</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>Молниеносный просмотр логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CI gate</span><span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span>
      </div>
      <p class="lede">Информеры Kubernetes позволяют ktl находить подходящие поды менее чем за секунду, поэтому инженеры получают поток логов сразу после ввода запроса.</p>
      <p>Команда `ktl logs` сочетает поддержку регулярных выражений, селекторов и контекстных подсказок, что делает её более гибкой заменой стандартного `kubectl logs`. Набор флагов `--highlight`, `--events`, `--selector` и `--container` помогает формировать точные выборки для сценария «Стабилизация checkout в prod-payments».</p>
      <ul class="bullet-list"><li>Поддержка `--since`, `--tail` и `--follow=false` упрощает анализ ретроспективных окон.</li><li>Потоки можно преобразовать в JSON (`--json`, `--output extjson`) для последующей автоматизации.</li><li>Шаблоны Go (`--template`, `--template-file`) позволяют собирать структурированные отчёты прямо в терминале.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-020">
      <div class="page-header">
        <span class="page-index">Страница 020</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Объединение подовых и узловых логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Context aware</span><span class="chip">HTML зеркала</span><span class="chip">Vendoring</span>
      </div>
      <p class="lede">ktl одновременно подхватывает kubelet и системные журналы, поэтому графики инцидента дополняются деталями с нод без отдельного ssh.</p>
      <p>Флаги `--node-logs`, `--node-log /var/log/kubelet.log`, `--node-log-all` и `--node-log-only` раскрывают то, что происходило на инфраструктурном уровне во время сценария «Построение posture-отчёта». Это экономит минуты на переключение контекстов и устраняет догадки об источнике деградации.</p>
      <ul class="bullet-list"><li>При отсутствии совпадающих подов `--node-log-all` продолжает поток от нод, чтобы не терять симптоматиику.</li><li>Фильтры по namespace и контейнерам остаются активными, даже когда добавлены системные файлы.</li><li>Сочетание с `--events` позволяет видеть kubelet-события и системные логи синхронно.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-021">
      <div class="page-header">
        <span class="page-index">Страница 021</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>Совместные зеркала HTML и WebSocket</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Color tokens</span><span class="chip">WS трансляция</span><span class="chip">PG backup</span>
      </div>
      <p class="lede">Любой терминальный запуск `ktl logs` можно расшарить через браузер или WebSocket, не копируя команды коллегам.</p>
      <p>Флаги `--ui :8080` и `--ws-listen :9080` создают зеркала, где вся подсветка и фильтры остаются управляемыми инициатором. Для сценария «Профилирование syscall» это означает, что SRE-команда, бизнес и боты наблюдают за тем же стеком данных без дублирования нагрузки на кластер.</p>
      <ul class="bullet-list"><li>Зрители не могут изменять фильтры, поэтому одна точка правды сохраняется автоматически.</li><li>Сессии можно архивировать напрямую из браузера, сохраняя хронологию инцидента.</li><li>WS-поток легко потребляется CI-ботами, которые реагируют на ключевые слова.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-022">
      <div class="page-header">
        <span class="page-index">Страница 022</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>Диагностический арсенал</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span>
      </div>
      <p class="lede">`ktl diag` покрывает квоты, CronJob, PodSecurity, storage и многое другое без написания скриптов.</p>
      <p>Команды `ktl diag quotas`, `ktl diag nodes`, `ktl diag storage`, `ktl diag cronjobs`, `ktl diag network` и `ktl diag podsecurity` формируют готовые таблицы. В сценарии «CI/CD контроль» они помогают быстро найти сдерживающий фактор и подготовить артефакты для постмортема.</p>
      <ul class="bullet-list"><li>`ktl diag resources` объединяет requests/limits с live metrics.</li><li>`ktl diag priorities` подсвечивает preemption и PriorityClasses.</li><li>`ktl diag report --html` строит визуальные scorecards по тем же данным.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-023">
      <div class="page-header">
        <span class="page-index">Страница 023</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Планирование деплоев</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span><span class="chip">CI gate</span>
      </div>
      <p class="lede">`ktl deploy plan` визуализирует создаваемые, изменяемые и удаляемые манифесты до запуска установки.</p>
      <p>Команда сравнивает chart + values с текущим кластером и отмечает объекты, влияющие на поды. В рамках «Поддержка нескольких kubeconfig» это избавляет от непредсказуемых рестартов и ускоряет согласования с командами сопровождения.</p>
      <ul class="bullet-list"><li>Флаги `--chart`, `--release`, `--namespace`, `--values` повторяют семантику Helm.</li><li>HTML вывод (`--html --output dist/plan.html`) превращает результат в артефакт для стейкхолдеров.</li><li>Diff-формат подсвечивает изменения образов, env и PDB.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-024">
      <div class="page-header">
        <span class="page-index">Страница 024</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>Drift и снепшоты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Timeline</span><span class="chip">PodSecurity</span><span class="chip">Context aware</span>
      </div>
      <p class="lede">`ktl logs drift watch` и `ktl diag snapshot save` непрерывно отслеживают расхождения манифестов.</p>
      <p>В сценарии «Формирование знаний» ktl фиксирует контрольные точки, а затем подсвечивает новые ReplicaSet, изменения хэшей и рестарты. Это основа для регрессной аналитики и аудита.</p>
      <ul class="bullet-list"><li>`ktl logs capture` записывает логи и события в переносимые tarball/SQLite артефакты.</li><li>`ktl logs capture replay` переигрывает инциденты офлайн.</li><li>Report HTML может сравнивать два снепшота (`--compare-left`, `--compare-right`).</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-025">
      <div class="page-header">
        <span class="page-index">Страница 025</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>SQLite-пакеты приложений</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Filter chips</span><span class="chip">CronJob guard</span><span class="chip">Color tokens</span>
      </div>
      <p class="lede">`ktl app package` собирает манифесты, образы, SBOM и аттестации в детерминированный `.k8s` файл.</p>
      <p>Подход SQLite гарантирует, что всё содержание доступно через стандартные `SELECT`. Для «Стабилизация checkout в prod-payments» это означает единый артефакт для air-gap кластеров и цепочки поставки.</p>
      <ul class="bullet-list"><li>Таблицы `metadata`, `manifests`, `images`, `attachments` покрывают весь спектр данных.</li><li>`ktl app package verify` проверяет Ed25519 подпись и вложенные SLSA/SBOM.</li><li>`ktl app unpack` извлекает снимки в файловую структуру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-026">
      <div class="page-header">
        <span class="page-index">Страница 026</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Контроль поставки</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">applyFilters()</span><span class="chip">Capture replay</span><span class="chip">Runbook CTA</span>
      </div>
      <p class="lede">Архив `.k8s` содержит provenance, лицензии и SBOM, поэтому аудиторы не требуют дополнительных выгрузок.</p>
      <p>В сценарии «Построение posture-отчёта» мы просто выполняем SQL-запросы к таблице `attachments`, чтобы доказать происхождение и состав релиза. Такая прозрачность редко встречается в проприетарных форматах.</p>
      <ul class="bullet-list"><li>SLSA JSON фиксирует BuildKit, git SHA и параметры запуска.</li><li>SBOM на базе SPDX 2.3 связывает каждый digest с лицензией.</li><li>License summary позволяет классифицировать copyleft/пермиссивные пакеты в секунды.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Утилизация узлов</h5>
          <span class="score-delta">+12%</span>
        </div>
        <p class="score-value">75%</p>
        <p class="score-copy">Скачок CPU на новых worker-нодаx требует `ktl diag nodes`.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-027">
      <div class="page-header">
        <span class="page-index">Страница 027</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>Вендоринг без дополнительных CLI</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Copy toast</span><span class="chip">Drift watch</span><span class="chip">Budget donuts</span>
      </div>
      <p class="lede">`ktl app vendor` встраивает возможности vendir, поэтому синхронизация сторонних чартов происходит в одном бинарнике.</p>
      <p>В сценарии «Профилирование syscall» мы поддерживаем `vendir.yml`/`vendir.lock.yml`, подкачиваем Helm-чарты, git-каталоги и артефакты GitHub Releases без отдельного CLI и сложных установок.</p>
      <ul class="bullet-list"><li>Поддерживаются `--directory`, мульти-конфигурации (`-f`), `--locked` режим.</li><li>Уважает `VENDIR_CACHE_DIR`, `VENDIR_GITHUB_API_TOKEN` и другие env.</li><li>Результаты складываются в `testdata/charts/` для детерминированных тестов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>PodSecurity соответствие</h5>
          <span class="score-delta">-6% после миграции</span>
        </div>
        <p class="score-value">71%</p>
        <p class="score-copy">Новые namespace не получили требуемые метки baseline.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-028">
      <div class="page-header">
        <span class="page-index">Страница 028</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>PostgreSQL резервные копии</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Print-safe</span><span class="chip">SQLite архив</span><span class="chip">Timeline</span>
      </div>
      <p class="lede">`ktl db backup` и `ktl db restore` работают прямо из подов, исключая ручные `kubectl exec`.</p>
      <p>В сценарии «CI/CD контроль» инженер снимает дампы всех БД (если флаг `--database` не задан), а затем восстанавливает их с помощью `--drop-db` и `--yes` без скачивания внешних утилит.</p>
      <ul class="bullet-list"><li>Архивы автоматически сжимаются и именуются по времени.</li><li>Восстановление показывает прогресс по каждой базе.</li><li>Можно направлять выгрузки в каталог `backups/` или внешний bucket.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>CI health gate</h5>
          <span class="score-delta">+8%</span>
        </div>
        <p class="score-value">92% проходов</p>
        <p class="score-copy">Автоматический `diag health` блокирует релизы до устранения предупреждений.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-029">
      <div class="page-header">
        <span class="page-index">Страница 029</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Traffic forensics</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Helm plan</span><span class="chip">SBOM встроен</span><span class="chip">Filter chips</span>
      </div>
      <p class="lede">`ktl analyze traffic` добавляет эфемерный контейнер и снимает tcpdump в сетевом неймспейсе целевого пода.</p>
      <p>Настройки `--between`, `--filter`, `--interface`, `--image` и пресеты `--bpf dns|handshake|postgres` создают точный профиль пакетов для «Поддержка нескольких kubeconfig» без модификации образов.</p>
      <ul class="bullet-list"><li>Собственный образ можно указать через `--image`.</li><li>Несколько `--target` позволяют захватывать разные неймспейсы.</li><li>Результаты потока пригодны для SIEM и внутреннего мониторинга.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование квот CPU</h5>
          <span class="score-delta">+9% к прошлому релизу</span>
        </div>
        <p class="score-value">82%</p>
        <p class="score-copy">Нагрузка растёт быстрее плана; требуется контроль горизонтального масштабирования.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-030">
      <div class="page-header">
        <span class="page-index">Страница 030</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>Syscall профилирование</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diff deployments</span><span class="chip">Ed25519 подпись</span><span class="chip">applyFilters()</span>
      </div>
      <p class="lede">`ktl analyze syscalls` подключает strace/bcc к шумным подам и агрегирует топ системных вызовов.</p>
      <p>Флаги `--profile-duration`, `--match`, `--top` и `--target-pid` обеспечивают гибкость, а вывод можно переключить в JSON для пайплайнов. Это позволяет в сценарии «Формирование знаний» определить, где приложение тратит время.</p>
      <ul class="bullet-list"><li>`--format json` облегчает автоматический парсинг.</li><li>Профиль по умолчанию длится 30 секунд и покрывает весь под.</li><li>`--image-pull-policy` и `--privileged` управляют безопасностью запуска.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Своевременность отчётов</h5>
          <span class="score-delta">-3%</span>
        </div>
        <p class="score-value">78%</p>
        <p class="score-copy">Не все команды выгружают posture PDF в срок.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-031">
      <div class="page-header">
        <span class="page-index">Страница 031</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>Scorecards и отчёты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span><span class="chip">Copy toast</span>
      </div>
      <p class="lede">`ktl diag report --html` формирует визуальные панели здоровья с фильтрами, таймлайном и runbook-картами.</p>
      <p>Именно здесь вступают в игру токены из DESIGN.md: `--surface`, `.panel`, `.score-card`, `.insight-stack`. Для «Стабилизация checkout в prod-payments» отчёт показывает квоты, PodSecurity, дельты SLO и выдаёт команды «Copy command».</p>
      <ul class="bullet-list"><li>`?print` режим упрощает PDF.</li><li>Фильтры по readiness/restars/violations ускоряют обзоры.</li><li>История сохраняется в `~/.config/ktl/scorecard/history.db`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-032">
      <div class="page-header">
        <span class="page-index">Страница 032</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Конфигурация и палитры</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span><span class="chip">Print-safe</span>
      </div>
      <p class="lede">ktl поддерживает YAML-конфигурации (`~/.config/ktl/config.yaml`) и переменные окружения `KTL_*`.</p>
      <p>В сценарии «Построение posture-отчёта» команда может зафиксировать namespace, дефолтные подсветки, кастомные цвета подов (`pod-colors`) и форматы времени, чтобы стандартизировать вывод.</p>
      <ul class="bullet-list"><li>`container-colors` поддерживает комбинации с подчёркиванием.</li><li>`--timezone` и `--timestamp-format` улучшают кросс-региональные расследования.</li><li>`--color=never` полезен для CI и логгеров.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-033">
      <div class="page-header">
        <span class="page-index">Страница 033</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>RBAC-aware режим</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">HTML зеркала</span><span class="chip">Vendoring</span><span class="chip">Helm plan</span>
      </div>
      <p class="lede">ktl наследует разрешения kubeconfig и аккуратно репортит отказанные вызовы.</p>
      <p>Это критично в сценарии «Профилирование syscall», где разные команды работают в общих кластерах. CLI сообщает, какие API вернули `Forbidden`, помогая обновить ClusterRole без догадок.</p>
      <ul class="bullet-list"><li>`--kubeconfig` и `--context` доступны на всех командах.</li><li>`KTL_CONFIG` позволяет быстро переключать профили.</li><li>Документация в `docs/config.all-options.yaml` даёт полный реестр флагов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-034">
      <div class="page-header">
        <span class="page-index">Страница 034</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>Capture и реплей логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">WS трансляция</span><span class="chip">PG backup</span><span class="chip">Diff deployments</span>
      </div>
      <p class="lede">`ktl logs capture` записывает события, логи и состояния workloads в переносимые архивы.</p>
      <p>Для «CI/CD контроль» мы фиксируем пяти минутку (`--duration`) или ручной диапазон, затем `ktl logs capture replay` показывает материал офлайн, а `ktl logs capture diff` сравнивает метаданные разных попыток.</p>
      <ul class="bullet-list"><li>Артефакты можно хранить в S3 и делиться с партнёрами.</li><li>Diff подчёркивает изменения подов, флагов и namespaces.</li><li>Повторное воспроизведение доступно без подключения к кластеру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-035">
      <div class="page-header">
        <span class="page-index">Страница 035</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Сбор метрик top</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span>
      </div>
      <p class="lede">`ktl diag top --all-namespaces` и `ktl top` дают быстрый обзор CPU/Memory без kubectl.</p>
      <p>В сценарии «Поддержка нескольких kubeconfig» отчёт выводит лидеров по потреблению и выявляет runaway контейнеры. Опции сортировки и label selector поддерживают точечные фокусы.</p>
      <ul class="bullet-list"><li>`--sort-cpu` и `--sort-memory` ускоряют разбор.</li><li>`-A` даёт кластерный обзор, `-n` фиксирует пространство имён.</li><li>Команда повторяет UX `kubectl top`, но доступна всегда там, где установлен ktl.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-036">
      <div class="page-header">
        <span class="page-index">Страница 036</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>BuildKit interactive build</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Quota heatmaps</span><span class="chip">CI gate</span><span class="chip">Node+pod журналы</span>
      </div>
      <p class="lede">`ktl build` с `--interactive` позволяет провалиться внутрь Dockerfile шага прямо при сбое.</p>
      <p>Для «Формирование знаний» мы используем `--interactive-shell "bash -l"`, чтобы воспроизвести окружение BuildKit и пофиксить образ до повторного запуска CI.</p>
      <ul class="bullet-list"><li>Поддерживаются разные GOOS/GOARCH через Makefile таргеты.</li><li>`testdata/build/interactive/Dockerfile` служит репро для обучения.</li><li>Флаг требует TTY, поэтому подходит для локальных терминалов или `ssh -tt`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-037">
      <div class="page-header">
        <span class="page-index">Страница 037</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>Молниеносный просмотр логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PodSecurity</span><span class="chip">Context aware</span><span class="chip">HTML зеркала</span>
      </div>
      <p class="lede">Информеры Kubernetes позволяют ktl находить подходящие поды менее чем за секунду, поэтому инженеры получают поток логов сразу после ввода запроса.</p>
      <p>Команда `ktl logs` сочетает поддержку регулярных выражений, селекторов и контекстных подсказок, что делает её более гибкой заменой стандартного `kubectl logs`. Набор флагов `--highlight`, `--events`, `--selector` и `--container` помогает формировать точные выборки для сценария «Стабилизация checkout в prod-payments».</p>
      <ul class="bullet-list"><li>Поддержка `--since`, `--tail` и `--follow=false` упрощает анализ ретроспективных окон.</li><li>Потоки можно преобразовать в JSON (`--json`, `--output extjson`) для последующей автоматизации.</li><li>Шаблоны Go (`--template`, `--template-file`) позволяют собирать структурированные отчёты прямо в терминале.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-038">
      <div class="page-header">
        <span class="page-index">Страница 038</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Объединение подовых и узловых логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CronJob guard</span><span class="chip">Color tokens</span><span class="chip">WS трансляция</span>
      </div>
      <p class="lede">ktl одновременно подхватывает kubelet и системные журналы, поэтому графики инцидента дополняются деталями с нод без отдельного ssh.</p>
      <p>Флаги `--node-logs`, `--node-log /var/log/kubelet.log`, `--node-log-all` и `--node-log-only` раскрывают то, что происходило на инфраструктурном уровне во время сценария «Построение posture-отчёта». Это экономит минуты на переключение контекстов и устраняет догадки об источнике деградации.</p>
      <ul class="bullet-list"><li>При отсутствии совпадающих подов `--node-log-all` продолжает поток от нод, чтобы не терять симптоматиику.</li><li>Фильтры по namespace и контейнерам остаются активными, даже когда добавлены системные файлы.</li><li>Сочетание с `--events` позволяет видеть kubelet-события и системные логи синхронно.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-039">
      <div class="page-header">
        <span class="page-index">Страница 039</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>Совместные зеркала HTML и WebSocket</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Capture replay</span><span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span>
      </div>
      <p class="lede">Любой терминальный запуск `ktl logs` можно расшарить через браузер или WebSocket, не копируя команды коллегам.</p>
      <p>Флаги `--ui :8080` и `--ws-listen :9080` создают зеркала, где вся подсветка и фильтры остаются управляемыми инициатором. Для сценария «Профилирование syscall» это означает, что SRE-команда, бизнес и боты наблюдают за тем же стеком данных без дублирования нагрузки на кластер.</p>
      <ul class="bullet-list"><li>Зрители не могут изменять фильтры, поэтому одна точка правды сохраняется автоматически.</li><li>Сессии можно архивировать напрямую из браузера, сохраняя хронологию инцидента.</li><li>WS-поток легко потребляется CI-ботами, которые реагируют на ключевые слова.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-040">
      <div class="page-header">
        <span class="page-index">Страница 040</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>Диагностический арсенал</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Drift watch</span><span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span>
      </div>
      <p class="lede">`ktl diag` покрывает квоты, CronJob, PodSecurity, storage и многое другое без написания скриптов.</p>
      <p>Команды `ktl diag quotas`, `ktl diag nodes`, `ktl diag storage`, `ktl diag cronjobs`, `ktl diag network` и `ktl diag podsecurity` формируют готовые таблицы. В сценарии «CI/CD контроль» они помогают быстро найти сдерживающий фактор и подготовить артефакты для постмортема.</p>
      <ul class="bullet-list"><li>`ktl diag resources` объединяет requests/limits с live metrics.</li><li>`ktl diag priorities` подсвечивает preemption и PriorityClasses.</li><li>`ktl diag report --html` строит визуальные scorecards по тем же данным.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-041">
      <div class="page-header">
        <span class="page-index">Страница 041</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Планирование деплоев</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">SQLite архив</span><span class="chip">Timeline</span><span class="chip">PodSecurity</span>
      </div>
      <p class="lede">`ktl deploy plan` визуализирует создаваемые, изменяемые и удаляемые манифесты до запуска установки.</p>
      <p>Команда сравнивает chart + values с текущим кластером и отмечает объекты, влияющие на поды. В рамках «Поддержка нескольких kubeconfig» это избавляет от непредсказуемых рестартов и ускоряет согласования с командами сопровождения.</p>
      <ul class="bullet-list"><li>Флаги `--chart`, `--release`, `--namespace`, `--values` повторяют семантику Helm.</li><li>HTML вывод (`--html --output dist/plan.html`) превращает результат в артефакт для стейкхолдеров.</li><li>Diff-формат подсвечивает изменения образов, env и PDB.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Утилизация узлов</h5>
          <span class="score-delta">+12%</span>
        </div>
        <p class="score-value">75%</p>
        <p class="score-copy">Скачок CPU на новых worker-нодаx требует `ktl diag nodes`.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-042">
      <div class="page-header">
        <span class="page-index">Страница 042</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>Drift и снепшоты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">SBOM встроен</span><span class="chip">Filter chips</span><span class="chip">CronJob guard</span>
      </div>
      <p class="lede">`ktl logs drift watch` и `ktl diag snapshot save` непрерывно отслеживают расхождения манифестов.</p>
      <p>В сценарии «Формирование знаний» ktl фиксирует контрольные точки, а затем подсвечивает новые ReplicaSet, изменения хэшей и рестарты. Это основа для регрессной аналитики и аудита.</p>
      <ul class="bullet-list"><li>`ktl logs capture` записывает логи и события в переносимые tarball/SQLite артефакты.</li><li>`ktl logs capture replay` переигрывает инциденты офлайн.</li><li>Report HTML может сравнивать два снепшота (`--compare-left`, `--compare-right`).</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>PodSecurity соответствие</h5>
          <span class="score-delta">-6% после миграции</span>
        </div>
        <p class="score-value">71%</p>
        <p class="score-copy">Новые namespace не получили требуемые метки baseline.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-043">
      <div class="page-header">
        <span class="page-index">Страница 043</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>SQLite-пакеты приложений</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Ed25519 подпись</span><span class="chip">applyFilters()</span><span class="chip">Capture replay</span>
      </div>
      <p class="lede">`ktl app package` собирает манифесты, образы, SBOM и аттестации в детерминированный `.k8s` файл.</p>
      <p>Подход SQLite гарантирует, что всё содержание доступно через стандартные `SELECT`. Для «Стабилизация checkout в prod-payments» это означает единый артефакт для air-gap кластеров и цепочки поставки.</p>
      <ul class="bullet-list"><li>Таблицы `metadata`, `manifests`, `images`, `attachments` покрывают весь спектр данных.</li><li>`ktl app package verify` проверяет Ed25519 подпись и вложенные SLSA/SBOM.</li><li>`ktl app unpack` извлекает снимки в файловую структуру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>CI health gate</h5>
          <span class="score-delta">+8%</span>
        </div>
        <p class="score-value">92% проходов</p>
        <p class="score-copy">Автоматический `diag health` блокирует релизы до устранения предупреждений.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-044">
      <div class="page-header">
        <span class="page-index">Страница 044</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Контроль поставки</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">tcpdump preset</span><span class="chip">Copy toast</span><span class="chip">Drift watch</span>
      </div>
      <p class="lede">Архив `.k8s` содержит provenance, лицензии и SBOM, поэтому аудиторы не требуют дополнительных выгрузок.</p>
      <p>В сценарии «Построение posture-отчёта» мы просто выполняем SQL-запросы к таблице `attachments`, чтобы доказать происхождение и состав релиза. Такая прозрачность редко встречается в проприетарных форматах.</p>
      <ul class="bullet-list"><li>SLSA JSON фиксирует BuildKit, git SHA и параметры запуска.</li><li>SBOM на базе SPDX 2.3 связывает каждый digest с лицензией.</li><li>License summary позволяет классифицировать copyleft/пермиссивные пакеты в секунды.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование квот CPU</h5>
          <span class="score-delta">+9% к прошлому релизу</span>
        </div>
        <p class="score-value">82%</p>
        <p class="score-copy">Нагрузка растёт быстрее плана; требуется контроль горизонтального масштабирования.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-045">
      <div class="page-header">
        <span class="page-index">Страница 045</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>Вендоринг без дополнительных CLI</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">strace JSON</span><span class="chip">Print-safe</span><span class="chip">SQLite архив</span>
      </div>
      <p class="lede">`ktl app vendor` встраивает возможности vendir, поэтому синхронизация сторонних чартов происходит в одном бинарнике.</p>
      <p>В сценарии «Профилирование syscall» мы поддерживаем `vendir.yml`/`vendir.lock.yml`, подкачиваем Helm-чарты, git-каталоги и артефакты GitHub Releases без отдельного CLI и сложных установок.</p>
      <ul class="bullet-list"><li>Поддерживаются `--directory`, мульти-конфигурации (`-f`), `--locked` режим.</li><li>Уважает `VENDIR_CACHE_DIR`, `VENDIR_GITHUB_API_TOKEN` и другие env.</li><li>Результаты складываются в `testdata/charts/` для детерминированных тестов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Своевременность отчётов</h5>
          <span class="score-delta">-3%</span>
        </div>
        <p class="score-value">78%</p>
        <p class="score-copy">Не все команды выгружают posture PDF в срок.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-046">
      <div class="page-header">
        <span class="page-index">Страница 046</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>PostgreSQL резервные копии</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Vendoring</span><span class="chip">Helm plan</span><span class="chip">SBOM встроен</span>
      </div>
      <p class="lede">`ktl db backup` и `ktl db restore` работают прямо из подов, исключая ручные `kubectl exec`.</p>
      <p>В сценарии «CI/CD контроль» инженер снимает дампы всех БД (если флаг `--database` не задан), а затем восстанавливает их с помощью `--drop-db` и `--yes` без скачивания внешних утилит.</p>
      <ul class="bullet-list"><li>Архивы автоматически сжимаются и именуются по времени.</li><li>Восстановление показывает прогресс по каждой базе.</li><li>Можно направлять выгрузки в каталог `backups/` или внешний bucket.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-047">
      <div class="page-header">
        <span class="page-index">Страница 047</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Traffic forensics</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PG backup</span><span class="chip">Diff deployments</span><span class="chip">Ed25519 подпись</span>
      </div>
      <p class="lede">`ktl analyze traffic` добавляет эфемерный контейнер и снимает tcpdump в сетевом неймспейсе целевого пода.</p>
      <p>Настройки `--between`, `--filter`, `--interface`, `--image` и пресеты `--bpf dns|handshake|postgres` создают точный профиль пакетов для «Поддержка нескольких kubeconfig» без модификации образов.</p>
      <ul class="bullet-list"><li>Собственный образ можно указать через `--image`.</li><li>Несколько `--target` позволяют захватывать разные неймспейсы.</li><li>Результаты потока пригодны для SIEM и внутреннего мониторинга.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-048">
      <div class="page-header">
        <span class="page-index">Страница 048</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>Syscall профилирование</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span>
      </div>
      <p class="lede">`ktl analyze syscalls` подключает strace/bcc к шумным подам и агрегирует топ системных вызовов.</p>
      <p>Флаги `--profile-duration`, `--match`, `--top` и `--target-pid` обеспечивают гибкость, а вывод можно переключить в JSON для пайплайнов. Это позволяет в сценарии «Формирование знаний» определить, где приложение тратит время.</p>
      <ul class="bullet-list"><li>`--format json` облегчает автоматический парсинг.</li><li>Профиль по умолчанию длится 30 секунд и покрывает весь под.</li><li>`--image-pull-policy` и `--privileged` управляют безопасностью запуска.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-049">
      <div class="page-header">
        <span class="page-index">Страница 049</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>Scorecards и отчёты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CI gate</span><span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span>
      </div>
      <p class="lede">`ktl diag report --html` формирует визуальные панели здоровья с фильтрами, таймлайном и runbook-картами.</p>
      <p>Именно здесь вступают в игру токены из DESIGN.md: `--surface`, `.panel`, `.score-card`, `.insight-stack`. Для «Стабилизация checkout в prod-payments» отчёт показывает квоты, PodSecurity, дельты SLO и выдаёт команды «Copy command».</p>
      <ul class="bullet-list"><li>`?print` режим упрощает PDF.</li><li>Фильтры по readiness/restars/violations ускоряют обзоры.</li><li>История сохраняется в `~/.config/ktl/scorecard/history.db`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-050">
      <div class="page-header">
        <span class="page-index">Страница 050</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Конфигурация и палитры</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Context aware</span><span class="chip">HTML зеркала</span><span class="chip">Vendoring</span>
      </div>
      <p class="lede">ktl поддерживает YAML-конфигурации (`~/.config/ktl/config.yaml`) и переменные окружения `KTL_*`.</p>
      <p>В сценарии «Построение posture-отчёта» команда может зафиксировать namespace, дефолтные подсветки, кастомные цвета подов (`pod-colors`) и форматы времени, чтобы стандартизировать вывод.</p>
      <ul class="bullet-list"><li>`container-colors` поддерживает комбинации с подчёркиванием.</li><li>`--timezone` и `--timestamp-format` улучшают кросс-региональные расследования.</li><li>`--color=never` полезен для CI и логгеров.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-051">
      <div class="page-header">
        <span class="page-index">Страница 051</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>RBAC-aware режим</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Color tokens</span><span class="chip">WS трансляция</span><span class="chip">PG backup</span>
      </div>
      <p class="lede">ktl наследует разрешения kubeconfig и аккуратно репортит отказанные вызовы.</p>
      <p>Это критично в сценарии «Профилирование syscall», где разные команды работают в общих кластерах. CLI сообщает, какие API вернули `Forbidden`, помогая обновить ClusterRole без догадок.</p>
      <ul class="bullet-list"><li>`--kubeconfig` и `--context` доступны на всех командах.</li><li>`KTL_CONFIG` позволяет быстро переключать профили.</li><li>Документация в `docs/config.all-options.yaml` даёт полный реестр флагов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-052">
      <div class="page-header">
        <span class="page-index">Страница 052</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>Capture и реплей логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span>
      </div>
      <p class="lede">`ktl logs capture` записывает события, логи и состояния workloads в переносимые архивы.</p>
      <p>Для «CI/CD контроль» мы фиксируем пяти минутку (`--duration`) или ручной диапазон, затем `ktl logs capture replay` показывает материал офлайн, а `ktl logs capture diff` сравнивает метаданные разных попыток.</p>
      <ul class="bullet-list"><li>Артефакты можно хранить в S3 и делиться с партнёрами.</li><li>Diff подчёркивает изменения подов, флагов и namespaces.</li><li>Повторное воспроизведение доступно без подключения к кластеру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-053">
      <div class="page-header">
        <span class="page-index">Страница 053</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Сбор метрик top</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span><span class="chip">CI gate</span>
      </div>
      <p class="lede">`ktl diag top --all-namespaces` и `ktl top` дают быстрый обзор CPU/Memory без kubectl.</p>
      <p>В сценарии «Поддержка нескольких kubeconfig» отчёт выводит лидеров по потреблению и выявляет runaway контейнеры. Опции сортировки и label selector поддерживают точечные фокусы.</p>
      <ul class="bullet-list"><li>`--sort-cpu` и `--sort-memory` ускоряют разбор.</li><li>`-A` даёт кластерный обзор, `-n` фиксирует пространство имён.</li><li>Команда повторяет UX `kubectl top`, но доступна всегда там, где установлен ktl.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-054">
      <div class="page-header">
        <span class="page-index">Страница 054</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>BuildKit interactive build</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Timeline</span><span class="chip">PodSecurity</span><span class="chip">Context aware</span>
      </div>
      <p class="lede">`ktl build` с `--interactive` позволяет провалиться внутрь Dockerfile шага прямо при сбое.</p>
      <p>Для «Формирование знаний» мы используем `--interactive-shell "bash -l"`, чтобы воспроизвести окружение BuildKit и пофиксить образ до повторного запуска CI.</p>
      <ul class="bullet-list"><li>Поддерживаются разные GOOS/GOARCH через Makefile таргеты.</li><li>`testdata/build/interactive/Dockerfile` служит репро для обучения.</li><li>Флаг требует TTY, поэтому подходит для локальных терминалов или `ssh -tt`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-055">
      <div class="page-header">
        <span class="page-index">Страница 055</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>Молниеносный просмотр логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Filter chips</span><span class="chip">CronJob guard</span><span class="chip">Color tokens</span>
      </div>
      <p class="lede">Информеры Kubernetes позволяют ktl находить подходящие поды менее чем за секунду, поэтому инженеры получают поток логов сразу после ввода запроса.</p>
      <p>Команда `ktl logs` сочетает поддержку регулярных выражений, селекторов и контекстных подсказок, что делает её более гибкой заменой стандартного `kubectl logs`. Набор флагов `--highlight`, `--events`, `--selector` и `--container` помогает формировать точные выборки для сценария «Стабилизация checkout в prod-payments».</p>
      <ul class="bullet-list"><li>Поддержка `--since`, `--tail` и `--follow=false` упрощает анализ ретроспективных окон.</li><li>Потоки можно преобразовать в JSON (`--json`, `--output extjson`) для последующей автоматизации.</li><li>Шаблоны Go (`--template`, `--template-file`) позволяют собирать структурированные отчёты прямо в терминале.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-056">
      <div class="page-header">
        <span class="page-index">Страница 056</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Объединение подовых и узловых логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">applyFilters()</span><span class="chip">Capture replay</span><span class="chip">Runbook CTA</span>
      </div>
      <p class="lede">ktl одновременно подхватывает kubelet и системные журналы, поэтому графики инцидента дополняются деталями с нод без отдельного ssh.</p>
      <p>Флаги `--node-logs`, `--node-log /var/log/kubelet.log`, `--node-log-all` и `--node-log-only` раскрывают то, что происходило на инфраструктурном уровне во время сценария «Построение posture-отчёта». Это экономит минуты на переключение контекстов и устраняет догадки об источнике деградации.</p>
      <ul class="bullet-list"><li>При отсутствии совпадающих подов `--node-log-all` продолжает поток от нод, чтобы не терять симптоматиику.</li><li>Фильтры по namespace и контейнерам остаются активными, даже когда добавлены системные файлы.</li><li>Сочетание с `--events` позволяет видеть kubelet-события и системные логи синхронно.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Утилизация узлов</h5>
          <span class="score-delta">+12%</span>
        </div>
        <p class="score-value">75%</p>
        <p class="score-copy">Скачок CPU на новых worker-нодаx требует `ktl diag nodes`.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-057">
      <div class="page-header">
        <span class="page-index">Страница 057</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>Совместные зеркала HTML и WebSocket</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Copy toast</span><span class="chip">Drift watch</span><span class="chip">Budget donuts</span>
      </div>
      <p class="lede">Любой терминальный запуск `ktl logs` можно расшарить через браузер или WebSocket, не копируя команды коллегам.</p>
      <p>Флаги `--ui :8080` и `--ws-listen :9080` создают зеркала, где вся подсветка и фильтры остаются управляемыми инициатором. Для сценария «Профилирование syscall» это означает, что SRE-команда, бизнес и боты наблюдают за тем же стеком данных без дублирования нагрузки на кластер.</p>
      <ul class="bullet-list"><li>Зрители не могут изменять фильтры, поэтому одна точка правды сохраняется автоматически.</li><li>Сессии можно архивировать напрямую из браузера, сохраняя хронологию инцидента.</li><li>WS-поток легко потребляется CI-ботами, которые реагируют на ключевые слова.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>PodSecurity соответствие</h5>
          <span class="score-delta">-6% после миграции</span>
        </div>
        <p class="score-value">71%</p>
        <p class="score-copy">Новые namespace не получили требуемые метки baseline.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-058">
      <div class="page-header">
        <span class="page-index">Страница 058</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>Диагностический арсенал</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Print-safe</span><span class="chip">SQLite архив</span><span class="chip">Timeline</span>
      </div>
      <p class="lede">`ktl diag` покрывает квоты, CronJob, PodSecurity, storage и многое другое без написания скриптов.</p>
      <p>Команды `ktl diag quotas`, `ktl diag nodes`, `ktl diag storage`, `ktl diag cronjobs`, `ktl diag network` и `ktl diag podsecurity` формируют готовые таблицы. В сценарии «CI/CD контроль» они помогают быстро найти сдерживающий фактор и подготовить артефакты для постмортема.</p>
      <ul class="bullet-list"><li>`ktl diag resources` объединяет requests/limits с live metrics.</li><li>`ktl diag priorities` подсвечивает preemption и PriorityClasses.</li><li>`ktl diag report --html` строит визуальные scorecards по тем же данным.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>CI health gate</h5>
          <span class="score-delta">+8%</span>
        </div>
        <p class="score-value">92% проходов</p>
        <p class="score-copy">Автоматический `diag health` блокирует релизы до устранения предупреждений.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-059">
      <div class="page-header">
        <span class="page-index">Страница 059</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Планирование деплоев</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Helm plan</span><span class="chip">SBOM встроен</span><span class="chip">Filter chips</span>
      </div>
      <p class="lede">`ktl deploy plan` визуализирует создаваемые, изменяемые и удаляемые манифесты до запуска установки.</p>
      <p>Команда сравнивает chart + values с текущим кластером и отмечает объекты, влияющие на поды. В рамках «Поддержка нескольких kubeconfig» это избавляет от непредсказуемых рестартов и ускоряет согласования с командами сопровождения.</p>
      <ul class="bullet-list"><li>Флаги `--chart`, `--release`, `--namespace`, `--values` повторяют семантику Helm.</li><li>HTML вывод (`--html --output dist/plan.html`) превращает результат в артефакт для стейкхолдеров.</li><li>Diff-формат подсвечивает изменения образов, env и PDB.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование квот CPU</h5>
          <span class="score-delta">+9% к прошлому релизу</span>
        </div>
        <p class="score-value">82%</p>
        <p class="score-copy">Нагрузка растёт быстрее плана; требуется контроль горизонтального масштабирования.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-060">
      <div class="page-header">
        <span class="page-index">Страница 060</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>Drift и снепшоты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diff deployments</span><span class="chip">Ed25519 подпись</span><span class="chip">applyFilters()</span>
      </div>
      <p class="lede">`ktl logs drift watch` и `ktl diag snapshot save` непрерывно отслеживают расхождения манифестов.</p>
      <p>В сценарии «Формирование знаний» ktl фиксирует контрольные точки, а затем подсвечивает новые ReplicaSet, изменения хэшей и рестарты. Это основа для регрессной аналитики и аудита.</p>
      <ul class="bullet-list"><li>`ktl logs capture` записывает логи и события в переносимые tarball/SQLite артефакты.</li><li>`ktl logs capture replay` переигрывает инциденты офлайн.</li><li>Report HTML может сравнивать два снепшота (`--compare-left`, `--compare-right`).</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Своевременность отчётов</h5>
          <span class="score-delta">-3%</span>
        </div>
        <p class="score-value">78%</p>
        <p class="score-copy">Не все команды выгружают posture PDF в срок.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-061">
      <div class="page-header">
        <span class="page-index">Страница 061</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>SQLite-пакеты приложений</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span><span class="chip">Copy toast</span>
      </div>
      <p class="lede">`ktl app package` собирает манифесты, образы, SBOM и аттестации в детерминированный `.k8s` файл.</p>
      <p>Подход SQLite гарантирует, что всё содержание доступно через стандартные `SELECT`. Для «Стабилизация checkout в prod-payments» это означает единый артефакт для air-gap кластеров и цепочки поставки.</p>
      <ul class="bullet-list"><li>Таблицы `metadata`, `manifests`, `images`, `attachments` покрывают весь спектр данных.</li><li>`ktl app package verify` проверяет Ed25519 подпись и вложенные SLSA/SBOM.</li><li>`ktl app unpack` извлекает снимки в файловую структуру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-062">
      <div class="page-header">
        <span class="page-index">Страница 062</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Контроль поставки</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span><span class="chip">Print-safe</span>
      </div>
      <p class="lede">Архив `.k8s` содержит provenance, лицензии и SBOM, поэтому аудиторы не требуют дополнительных выгрузок.</p>
      <p>В сценарии «Построение posture-отчёта» мы просто выполняем SQL-запросы к таблице `attachments`, чтобы доказать происхождение и состав релиза. Такая прозрачность редко встречается в проприетарных форматах.</p>
      <ul class="bullet-list"><li>SLSA JSON фиксирует BuildKit, git SHA и параметры запуска.</li><li>SBOM на базе SPDX 2.3 связывает каждый digest с лицензией.</li><li>License summary позволяет классифицировать copyleft/пермиссивные пакеты в секунды.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-063">
      <div class="page-header">
        <span class="page-index">Страница 063</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>Вендоринг без дополнительных CLI</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">HTML зеркала</span><span class="chip">Vendoring</span><span class="chip">Helm plan</span>
      </div>
      <p class="lede">`ktl app vendor` встраивает возможности vendir, поэтому синхронизация сторонних чартов происходит в одном бинарнике.</p>
      <p>В сценарии «Профилирование syscall» мы поддерживаем `vendir.yml`/`vendir.lock.yml`, подкачиваем Helm-чарты, git-каталоги и артефакты GitHub Releases без отдельного CLI и сложных установок.</p>
      <ul class="bullet-list"><li>Поддерживаются `--directory`, мульти-конфигурации (`-f`), `--locked` режим.</li><li>Уважает `VENDIR_CACHE_DIR`, `VENDIR_GITHUB_API_TOKEN` и другие env.</li><li>Результаты складываются в `testdata/charts/` для детерминированных тестов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-064">
      <div class="page-header">
        <span class="page-index">Страница 064</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>PostgreSQL резервные копии</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">WS трансляция</span><span class="chip">PG backup</span><span class="chip">Diff deployments</span>
      </div>
      <p class="lede">`ktl db backup` и `ktl db restore` работают прямо из подов, исключая ручные `kubectl exec`.</p>
      <p>В сценарии «CI/CD контроль» инженер снимает дампы всех БД (если флаг `--database` не задан), а затем восстанавливает их с помощью `--drop-db` и `--yes` без скачивания внешних утилит.</p>
      <ul class="bullet-list"><li>Архивы автоматически сжимаются и именуются по времени.</li><li>Восстановление показывает прогресс по каждой базе.</li><li>Можно направлять выгрузки в каталог `backups/` или внешний bucket.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-065">
      <div class="page-header">
        <span class="page-index">Страница 065</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Traffic forensics</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span>
      </div>
      <p class="lede">`ktl analyze traffic` добавляет эфемерный контейнер и снимает tcpdump в сетевом неймспейсе целевого пода.</p>
      <p>Настройки `--between`, `--filter`, `--interface`, `--image` и пресеты `--bpf dns|handshake|postgres` создают точный профиль пакетов для «Поддержка нескольких kubeconfig» без модификации образов.</p>
      <ul class="bullet-list"><li>Собственный образ можно указать через `--image`.</li><li>Несколько `--target` позволяют захватывать разные неймспейсы.</li><li>Результаты потока пригодны для SIEM и внутреннего мониторинга.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-066">
      <div class="page-header">
        <span class="page-index">Страница 066</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>Syscall профилирование</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Quota heatmaps</span><span class="chip">CI gate</span><span class="chip">Node+pod журналы</span>
      </div>
      <p class="lede">`ktl analyze syscalls` подключает strace/bcc к шумным подам и агрегирует топ системных вызовов.</p>
      <p>Флаги `--profile-duration`, `--match`, `--top` и `--target-pid` обеспечивают гибкость, а вывод можно переключить в JSON для пайплайнов. Это позволяет в сценарии «Формирование знаний» определить, где приложение тратит время.</p>
      <ul class="bullet-list"><li>`--format json` облегчает автоматический парсинг.</li><li>Профиль по умолчанию длится 30 секунд и покрывает весь под.</li><li>`--image-pull-policy` и `--privileged` управляют безопасностью запуска.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-067">
      <div class="page-header">
        <span class="page-index">Страница 067</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>Scorecards и отчёты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PodSecurity</span><span class="chip">Context aware</span><span class="chip">HTML зеркала</span>
      </div>
      <p class="lede">`ktl diag report --html` формирует визуальные панели здоровья с фильтрами, таймлайном и runbook-картами.</p>
      <p>Именно здесь вступают в игру токены из DESIGN.md: `--surface`, `.panel`, `.score-card`, `.insight-stack`. Для «Стабилизация checkout в prod-payments» отчёт показывает квоты, PodSecurity, дельты SLO и выдаёт команды «Copy command».</p>
      <ul class="bullet-list"><li>`?print` режим упрощает PDF.</li><li>Фильтры по readiness/restars/violations ускоряют обзоры.</li><li>История сохраняется в `~/.config/ktl/scorecard/history.db`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-068">
      <div class="page-header">
        <span class="page-index">Страница 068</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Конфигурация и палитры</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CronJob guard</span><span class="chip">Color tokens</span><span class="chip">WS трансляция</span>
      </div>
      <p class="lede">ktl поддерживает YAML-конфигурации (`~/.config/ktl/config.yaml`) и переменные окружения `KTL_*`.</p>
      <p>В сценарии «Построение posture-отчёта» команда может зафиксировать namespace, дефолтные подсветки, кастомные цвета подов (`pod-colors`) и форматы времени, чтобы стандартизировать вывод.</p>
      <ul class="bullet-list"><li>`container-colors` поддерживает комбинации с подчёркиванием.</li><li>`--timezone` и `--timestamp-format` улучшают кросс-региональные расследования.</li><li>`--color=never` полезен для CI и логгеров.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-069">
      <div class="page-header">
        <span class="page-index">Страница 069</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>RBAC-aware режим</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Capture replay</span><span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span>
      </div>
      <p class="lede">ktl наследует разрешения kubeconfig и аккуратно репортит отказанные вызовы.</p>
      <p>Это критично в сценарии «Профилирование syscall», где разные команды работают в общих кластерах. CLI сообщает, какие API вернули `Forbidden`, помогая обновить ClusterRole без догадок.</p>
      <ul class="bullet-list"><li>`--kubeconfig` и `--context` доступны на всех командах.</li><li>`KTL_CONFIG` позволяет быстро переключать профили.</li><li>Документация в `docs/config.all-options.yaml` даёт полный реестр флагов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-070">
      <div class="page-header">
        <span class="page-index">Страница 070</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>Capture и реплей логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Drift watch</span><span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span>
      </div>
      <p class="lede">`ktl logs capture` записывает события, логи и состояния workloads в переносимые архивы.</p>
      <p>Для «CI/CD контроль» мы фиксируем пяти минутку (`--duration`) или ручной диапазон, затем `ktl logs capture replay` показывает материал офлайн, а `ktl logs capture diff` сравнивает метаданные разных попыток.</p>
      <ul class="bullet-list"><li>Артефакты можно хранить в S3 и делиться с партнёрами.</li><li>Diff подчёркивает изменения подов, флагов и namespaces.</li><li>Повторное воспроизведение доступно без подключения к кластеру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-071">
      <div class="page-header">
        <span class="page-index">Страница 071</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Сбор метрик top</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">SQLite архив</span><span class="chip">Timeline</span><span class="chip">PodSecurity</span>
      </div>
      <p class="lede">`ktl diag top --all-namespaces` и `ktl top` дают быстрый обзор CPU/Memory без kubectl.</p>
      <p>В сценарии «Поддержка нескольких kubeconfig» отчёт выводит лидеров по потреблению и выявляет runaway контейнеры. Опции сортировки и label selector поддерживают точечные фокусы.</p>
      <ul class="bullet-list"><li>`--sort-cpu` и `--sort-memory` ускоряют разбор.</li><li>`-A` даёт кластерный обзор, `-n` фиксирует пространство имён.</li><li>Команда повторяет UX `kubectl top`, но доступна всегда там, где установлен ktl.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Утилизация узлов</h5>
          <span class="score-delta">+12%</span>
        </div>
        <p class="score-value">75%</p>
        <p class="score-copy">Скачок CPU на новых worker-нодаx требует `ktl diag nodes`.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-072">
      <div class="page-header">
        <span class="page-index">Страница 072</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>BuildKit interactive build</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">SBOM встроен</span><span class="chip">Filter chips</span><span class="chip">CronJob guard</span>
      </div>
      <p class="lede">`ktl build` с `--interactive` позволяет провалиться внутрь Dockerfile шага прямо при сбое.</p>
      <p>Для «Формирование знаний» мы используем `--interactive-shell "bash -l"`, чтобы воспроизвести окружение BuildKit и пофиксить образ до повторного запуска CI.</p>
      <ul class="bullet-list"><li>Поддерживаются разные GOOS/GOARCH через Makefile таргеты.</li><li>`testdata/build/interactive/Dockerfile` служит репро для обучения.</li><li>Флаг требует TTY, поэтому подходит для локальных терминалов или `ssh -tt`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>PodSecurity соответствие</h5>
          <span class="score-delta">-6% после миграции</span>
        </div>
        <p class="score-value">71%</p>
        <p class="score-copy">Новые namespace не получили требуемые метки baseline.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-073">
      <div class="page-header">
        <span class="page-index">Страница 073</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>Молниеносный просмотр логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Ed25519 подпись</span><span class="chip">applyFilters()</span><span class="chip">Capture replay</span>
      </div>
      <p class="lede">Информеры Kubernetes позволяют ktl находить подходящие поды менее чем за секунду, поэтому инженеры получают поток логов сразу после ввода запроса.</p>
      <p>Команда `ktl logs` сочетает поддержку регулярных выражений, селекторов и контекстных подсказок, что делает её более гибкой заменой стандартного `kubectl logs`. Набор флагов `--highlight`, `--events`, `--selector` и `--container` помогает формировать точные выборки для сценария «Стабилизация checkout в prod-payments».</p>
      <ul class="bullet-list"><li>Поддержка `--since`, `--tail` и `--follow=false` упрощает анализ ретроспективных окон.</li><li>Потоки можно преобразовать в JSON (`--json`, `--output extjson`) для последующей автоматизации.</li><li>Шаблоны Go (`--template`, `--template-file`) позволяют собирать структурированные отчёты прямо в терминале.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>CI health gate</h5>
          <span class="score-delta">+8%</span>
        </div>
        <p class="score-value">92% проходов</p>
        <p class="score-copy">Автоматический `diag health` блокирует релизы до устранения предупреждений.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-074">
      <div class="page-header">
        <span class="page-index">Страница 074</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Объединение подовых и узловых логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">tcpdump preset</span><span class="chip">Copy toast</span><span class="chip">Drift watch</span>
      </div>
      <p class="lede">ktl одновременно подхватывает kubelet и системные журналы, поэтому графики инцидента дополняются деталями с нод без отдельного ssh.</p>
      <p>Флаги `--node-logs`, `--node-log /var/log/kubelet.log`, `--node-log-all` и `--node-log-only` раскрывают то, что происходило на инфраструктурном уровне во время сценария «Построение posture-отчёта». Это экономит минуты на переключение контекстов и устраняет догадки об источнике деградации.</p>
      <ul class="bullet-list"><li>При отсутствии совпадающих подов `--node-log-all` продолжает поток от нод, чтобы не терять симптоматиику.</li><li>Фильтры по namespace и контейнерам остаются активными, даже когда добавлены системные файлы.</li><li>Сочетание с `--events` позволяет видеть kubelet-события и системные логи синхронно.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование квот CPU</h5>
          <span class="score-delta">+9% к прошлому релизу</span>
        </div>
        <p class="score-value">82%</p>
        <p class="score-copy">Нагрузка растёт быстрее плана; требуется контроль горизонтального масштабирования.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-075">
      <div class="page-header">
        <span class="page-index">Страница 075</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>Совместные зеркала HTML и WebSocket</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">strace JSON</span><span class="chip">Print-safe</span><span class="chip">SQLite архив</span>
      </div>
      <p class="lede">Любой терминальный запуск `ktl logs` можно расшарить через браузер или WebSocket, не копируя команды коллегам.</p>
      <p>Флаги `--ui :8080` и `--ws-listen :9080` создают зеркала, где вся подсветка и фильтры остаются управляемыми инициатором. Для сценария «Профилирование syscall» это означает, что SRE-команда, бизнес и боты наблюдают за тем же стеком данных без дублирования нагрузки на кластер.</p>
      <ul class="bullet-list"><li>Зрители не могут изменять фильтры, поэтому одна точка правды сохраняется автоматически.</li><li>Сессии можно архивировать напрямую из браузера, сохраняя хронологию инцидента.</li><li>WS-поток легко потребляется CI-ботами, которые реагируют на ключевые слова.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Своевременность отчётов</h5>
          <span class="score-delta">-3%</span>
        </div>
        <p class="score-value">78%</p>
        <p class="score-copy">Не все команды выгружают posture PDF в срок.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-076">
      <div class="page-header">
        <span class="page-index">Страница 076</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>Диагностический арсенал</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Vendoring</span><span class="chip">Helm plan</span><span class="chip">SBOM встроен</span>
      </div>
      <p class="lede">`ktl diag` покрывает квоты, CronJob, PodSecurity, storage и многое другое без написания скриптов.</p>
      <p>Команды `ktl diag quotas`, `ktl diag nodes`, `ktl diag storage`, `ktl diag cronjobs`, `ktl diag network` и `ktl diag podsecurity` формируют готовые таблицы. В сценарии «CI/CD контроль» они помогают быстро найти сдерживающий фактор и подготовить артефакты для постмортема.</p>
      <ul class="bullet-list"><li>`ktl diag resources` объединяет requests/limits с live metrics.</li><li>`ktl diag priorities` подсвечивает preemption и PriorityClasses.</li><li>`ktl diag report --html` строит визуальные scorecards по тем же данным.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-077">
      <div class="page-header">
        <span class="page-index">Страница 077</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Планирование деплоев</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PG backup</span><span class="chip">Diff deployments</span><span class="chip">Ed25519 подпись</span>
      </div>
      <p class="lede">`ktl deploy plan` визуализирует создаваемые, изменяемые и удаляемые манифесты до запуска установки.</p>
      <p>Команда сравнивает chart + values с текущим кластером и отмечает объекты, влияющие на поды. В рамках «Поддержка нескольких kubeconfig» это избавляет от непредсказуемых рестартов и ускоряет согласования с командами сопровождения.</p>
      <ul class="bullet-list"><li>Флаги `--chart`, `--release`, `--namespace`, `--values` повторяют семантику Helm.</li><li>HTML вывод (`--html --output dist/plan.html`) превращает результат в артефакт для стейкхолдеров.</li><li>Diff-формат подсвечивает изменения образов, env и PDB.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-078">
      <div class="page-header">
        <span class="page-index">Страница 078</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>Drift и снепшоты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span>
      </div>
      <p class="lede">`ktl logs drift watch` и `ktl diag snapshot save` непрерывно отслеживают расхождения манифестов.</p>
      <p>В сценарии «Формирование знаний» ktl фиксирует контрольные точки, а затем подсвечивает новые ReplicaSet, изменения хэшей и рестарты. Это основа для регрессной аналитики и аудита.</p>
      <ul class="bullet-list"><li>`ktl logs capture` записывает логи и события в переносимые tarball/SQLite артефакты.</li><li>`ktl logs capture replay` переигрывает инциденты офлайн.</li><li>Report HTML может сравнивать два снепшота (`--compare-left`, `--compare-right`).</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-079">
      <div class="page-header">
        <span class="page-index">Страница 079</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>SQLite-пакеты приложений</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CI gate</span><span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span>
      </div>
      <p class="lede">`ktl app package` собирает манифесты, образы, SBOM и аттестации в детерминированный `.k8s` файл.</p>
      <p>Подход SQLite гарантирует, что всё содержание доступно через стандартные `SELECT`. Для «Стабилизация checkout в prod-payments» это означает единый артефакт для air-gap кластеров и цепочки поставки.</p>
      <ul class="bullet-list"><li>Таблицы `metadata`, `manifests`, `images`, `attachments` покрывают весь спектр данных.</li><li>`ktl app package verify` проверяет Ed25519 подпись и вложенные SLSA/SBOM.</li><li>`ktl app unpack` извлекает снимки в файловую структуру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-080">
      <div class="page-header">
        <span class="page-index">Страница 080</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Контроль поставки</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Context aware</span><span class="chip">HTML зеркала</span><span class="chip">Vendoring</span>
      </div>
      <p class="lede">Архив `.k8s` содержит provenance, лицензии и SBOM, поэтому аудиторы не требуют дополнительных выгрузок.</p>
      <p>В сценарии «Построение posture-отчёта» мы просто выполняем SQL-запросы к таблице `attachments`, чтобы доказать происхождение и состав релиза. Такая прозрачность редко встречается в проприетарных форматах.</p>
      <ul class="bullet-list"><li>SLSA JSON фиксирует BuildKit, git SHA и параметры запуска.</li><li>SBOM на базе SPDX 2.3 связывает каждый digest с лицензией.</li><li>License summary позволяет классифицировать copyleft/пермиссивные пакеты в секунды.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-081">
      <div class="page-header">
        <span class="page-index">Страница 081</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>Вендоринг без дополнительных CLI</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Color tokens</span><span class="chip">WS трансляция</span><span class="chip">PG backup</span>
      </div>
      <p class="lede">`ktl app vendor` встраивает возможности vendir, поэтому синхронизация сторонних чартов происходит в одном бинарнике.</p>
      <p>В сценарии «Профилирование syscall» мы поддерживаем `vendir.yml`/`vendir.lock.yml`, подкачиваем Helm-чарты, git-каталоги и артефакты GitHub Releases без отдельного CLI и сложных установок.</p>
      <ul class="bullet-list"><li>Поддерживаются `--directory`, мульти-конфигурации (`-f`), `--locked` режим.</li><li>Уважает `VENDIR_CACHE_DIR`, `VENDIR_GITHUB_API_TOKEN` и другие env.</li><li>Результаты складываются в `testdata/charts/` для детерминированных тестов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-082">
      <div class="page-header">
        <span class="page-index">Страница 082</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>PostgreSQL резервные копии</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span>
      </div>
      <p class="lede">`ktl db backup` и `ktl db restore` работают прямо из подов, исключая ручные `kubectl exec`.</p>
      <p>В сценарии «CI/CD контроль» инженер снимает дампы всех БД (если флаг `--database` не задан), а затем восстанавливает их с помощью `--drop-db` и `--yes` без скачивания внешних утилит.</p>
      <ul class="bullet-list"><li>Архивы автоматически сжимаются и именуются по времени.</li><li>Восстановление показывает прогресс по каждой базе.</li><li>Можно направлять выгрузки в каталог `backups/` или внешний bucket.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-083">
      <div class="page-header">
        <span class="page-index">Страница 083</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Traffic forensics</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span><span class="chip">CI gate</span>
      </div>
      <p class="lede">`ktl analyze traffic` добавляет эфемерный контейнер и снимает tcpdump в сетевом неймспейсе целевого пода.</p>
      <p>Настройки `--between`, `--filter`, `--interface`, `--image` и пресеты `--bpf dns|handshake|postgres` создают точный профиль пакетов для «Поддержка нескольких kubeconfig» без модификации образов.</p>
      <ul class="bullet-list"><li>Собственный образ можно указать через `--image`.</li><li>Несколько `--target` позволяют захватывать разные неймспейсы.</li><li>Результаты потока пригодны для SIEM и внутреннего мониторинга.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-084">
      <div class="page-header">
        <span class="page-index">Страница 084</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>Syscall профилирование</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Timeline</span><span class="chip">PodSecurity</span><span class="chip">Context aware</span>
      </div>
      <p class="lede">`ktl analyze syscalls` подключает strace/bcc к шумным подам и агрегирует топ системных вызовов.</p>
      <p>Флаги `--profile-duration`, `--match`, `--top` и `--target-pid` обеспечивают гибкость, а вывод можно переключить в JSON для пайплайнов. Это позволяет в сценарии «Формирование знаний» определить, где приложение тратит время.</p>
      <ul class="bullet-list"><li>`--format json` облегчает автоматический парсинг.</li><li>Профиль по умолчанию длится 30 секунд и покрывает весь под.</li><li>`--image-pull-policy` и `--privileged` управляют безопасностью запуска.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-085">
      <div class="page-header">
        <span class="page-index">Страница 085</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>Scorecards и отчёты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Filter chips</span><span class="chip">CronJob guard</span><span class="chip">Color tokens</span>
      </div>
      <p class="lede">`ktl diag report --html` формирует визуальные панели здоровья с фильтрами, таймлайном и runbook-картами.</p>
      <p>Именно здесь вступают в игру токены из DESIGN.md: `--surface`, `.panel`, `.score-card`, `.insight-stack`. Для «Стабилизация checkout в prod-payments» отчёт показывает квоты, PodSecurity, дельты SLO и выдаёт команды «Copy command».</p>
      <ul class="bullet-list"><li>`?print` режим упрощает PDF.</li><li>Фильтры по readiness/restars/violations ускоряют обзоры.</li><li>История сохраняется в `~/.config/ktl/scorecard/history.db`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-086">
      <div class="page-header">
        <span class="page-index">Страница 086</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Конфигурация и палитры</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">applyFilters()</span><span class="chip">Capture replay</span><span class="chip">Runbook CTA</span>
      </div>
      <p class="lede">ktl поддерживает YAML-конфигурации (`~/.config/ktl/config.yaml`) и переменные окружения `KTL_*`.</p>
      <p>В сценарии «Построение posture-отчёта» команда может зафиксировать namespace, дефолтные подсветки, кастомные цвета подов (`pod-colors`) и форматы времени, чтобы стандартизировать вывод.</p>
      <ul class="bullet-list"><li>`container-colors` поддерживает комбинации с подчёркиванием.</li><li>`--timezone` и `--timestamp-format` улучшают кросс-региональные расследования.</li><li>`--color=never` полезен для CI и логгеров.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Утилизация узлов</h5>
          <span class="score-delta">+12%</span>
        </div>
        <p class="score-value">75%</p>
        <p class="score-copy">Скачок CPU на новых worker-нодаx требует `ktl diag nodes`.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-087">
      <div class="page-header">
        <span class="page-index">Страница 087</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>RBAC-aware режим</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Copy toast</span><span class="chip">Drift watch</span><span class="chip">Budget donuts</span>
      </div>
      <p class="lede">ktl наследует разрешения kubeconfig и аккуратно репортит отказанные вызовы.</p>
      <p>Это критично в сценарии «Профилирование syscall», где разные команды работают в общих кластерах. CLI сообщает, какие API вернули `Forbidden`, помогая обновить ClusterRole без догадок.</p>
      <ul class="bullet-list"><li>`--kubeconfig` и `--context` доступны на всех командах.</li><li>`KTL_CONFIG` позволяет быстро переключать профили.</li><li>Документация в `docs/config.all-options.yaml` даёт полный реестр флагов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>PodSecurity соответствие</h5>
          <span class="score-delta">-6% после миграции</span>
        </div>
        <p class="score-value">71%</p>
        <p class="score-copy">Новые namespace не получили требуемые метки baseline.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-088">
      <div class="page-header">
        <span class="page-index">Страница 088</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>Capture и реплей логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Print-safe</span><span class="chip">SQLite архив</span><span class="chip">Timeline</span>
      </div>
      <p class="lede">`ktl logs capture` записывает события, логи и состояния workloads в переносимые архивы.</p>
      <p>Для «CI/CD контроль» мы фиксируем пяти минутку (`--duration`) или ручной диапазон, затем `ktl logs capture replay` показывает материал офлайн, а `ktl logs capture diff` сравнивает метаданные разных попыток.</p>
      <ul class="bullet-list"><li>Артефакты можно хранить в S3 и делиться с партнёрами.</li><li>Diff подчёркивает изменения подов, флагов и namespaces.</li><li>Повторное воспроизведение доступно без подключения к кластеру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>CI health gate</h5>
          <span class="score-delta">+8%</span>
        </div>
        <p class="score-value">92% проходов</p>
        <p class="score-copy">Автоматический `diag health` блокирует релизы до устранения предупреждений.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-089">
      <div class="page-header">
        <span class="page-index">Страница 089</span>
        <div>
          <p class="page-insight">Сделать отчёты читаемыми для бизнеса</p>
          <h2>Сбор метрик top</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Helm plan</span><span class="chip">SBOM встроен</span><span class="chip">Filter chips</span>
      </div>
      <p class="lede">`ktl diag top --all-namespaces` и `ktl top` дают быстрый обзор CPU/Memory без kubectl.</p>
      <p>В сценарии «Поддержка нескольких kubeconfig» отчёт выводит лидеров по потреблению и выявляет runaway контейнеры. Опции сортировки и label selector поддерживают точечные фокусы.</p>
      <ul class="bullet-list"><li>`--sort-cpu` и `--sort-memory` ускоряют разбор.</li><li>`-A` даёт кластерный обзор, `-n` фиксирует пространство имён.</li><li>Команда повторяет UX `kubectl top`, но доступна всегда там, где установлен ktl.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование квот CPU</h5>
          <span class="score-delta">+9% к прошлому релизу</span>
        </div>
        <p class="score-value">82%</p>
        <p class="score-copy">Нагрузка растёт быстрее плана; требуется контроль горизонтального масштабирования.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-090">
      <div class="page-header">
        <span class="page-index">Страница 090</span>
        <div>
          <p class="page-insight">Подтвердить соблюдение квот</p>
          <h2>BuildKit interactive build</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diff deployments</span><span class="chip">Ed25519 подпись</span><span class="chip">applyFilters()</span>
      </div>
      <p class="lede">`ktl build` с `--interactive` позволяет провалиться внутрь Dockerfile шага прямо при сбое.</p>
      <p>Для «Формирование знаний» мы используем `--interactive-shell "bash -l"`, чтобы воспроизвести окружение BuildKit и пофиксить образ до повторного запуска CI.</p>
      <ul class="bullet-list"><li>Поддерживаются разные GOOS/GOARCH через Makefile таргеты.</li><li>`testdata/build/interactive/Dockerfile` служит репро для обучения.</li><li>Флаг требует TTY, поэтому подходит для локальных терминалов или `ssh -tt`.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Своевременность отчётов</h5>
          <span class="score-delta">-3%</span>
        </div>
        <p class="score-value">78%</p>
        <p class="score-copy">Не все команды выгружают posture PDF в срок.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-091">
      <div class="page-header">
        <span class="page-index">Страница 091</span>
        <div>
          <p class="page-insight">Упростить расследования сети</p>
          <h2>Молниеносный просмотр логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Informer tail <1s</span><span class="chip">tcpdump preset</span><span class="chip">Copy toast</span>
      </div>
      <p class="lede">Информеры Kubernetes позволяют ktl находить подходящие поды менее чем за секунду, поэтому инженеры получают поток логов сразу после ввода запроса.</p>
      <p>Команда `ktl logs` сочетает поддержку регулярных выражений, селекторов и контекстных подсказок, что делает её более гибкой заменой стандартного `kubectl logs`. Набор флагов `--highlight`, `--events`, `--selector` и `--container` помогает формировать точные выборки для сценария «Стабилизация checkout в prod-payments».</p>
      <ul class="bullet-list"><li>Поддержка `--since`, `--tail` и `--follow=false` упрощает анализ ретроспективных окон.</li><li>Потоки можно преобразовать в JSON (`--json`, `--output extjson`) для последующей автоматизации.</li><li>Шаблоны Go (`--template`, `--template-file`) позволяют собирать структурированные отчёты прямо в терминале.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Готовность подов</h5>
          <span class="score-delta">+1.2% за неделю</span>
        </div>
        <p class="score-value">99%</p>
        <p class="score-copy">Большинство подов отвечает условию Ready даже во время пиков.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-092">
      <div class="page-header">
        <span class="page-index">Страница 092</span>
        <div>
          <p class="page-insight">Стандартизировать сбор логов</p>
          <h2>Объединение подовых и узловых логов</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Node+pod журналы</span><span class="chip">strace JSON</span><span class="chip">Print-safe</span>
      </div>
      <p class="lede">ktl одновременно подхватывает kubelet и системные журналы, поэтому графики инцидента дополняются деталями с нод без отдельного ssh.</p>
      <p>Флаги `--node-logs`, `--node-log /var/log/kubelet.log`, `--node-log-all` и `--node-log-only` раскрывают то, что происходило на инфраструктурном уровне во время сценария «Построение posture-отчёта». Это экономит минуты на переключение контекстов и устраняет догадки об источнике деградации.</p>
      <ul class="bullet-list"><li>При отсутствии совпадающих подов `--node-log-all` продолжает поток от нод, чтобы не терять симптоматиику.</li><li>Фильтры по namespace и контейнерам остаются активными, даже когда добавлены системные файлы.</li><li>Сочетание с `--events` позволяет видеть kubelet-события и системные логи синхронно.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Drift-инциденты</h5>
          <span class="score-delta">-2 случая</span>
        </div>
        <p class="score-value">0 за 30 дней</p>
        <p class="score-copy">Включённый drift watch предотвращает неожиданные изменения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-093">
      <div class="page-header">
        <span class="page-index">Страница 093</span>
        <div>
          <p class="page-insight">Ускорить аудит поставок</p>
          <h2>Совместные зеркала HTML и WebSocket</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">HTML зеркала</span><span class="chip">Vendoring</span><span class="chip">Helm plan</span>
      </div>
      <p class="lede">Любой терминальный запуск `ktl logs` можно расшарить через браузер или WebSocket, не копируя команды коллегам.</p>
      <p>Флаги `--ui :8080` и `--ws-listen :9080` создают зеркала, где вся подсветка и фильтры остаются управляемыми инициатором. Для сценария «Профилирование syscall» это означает, что SRE-команда, бизнес и боты наблюдают за тем же стеком данных без дублирования нагрузки на кластер.</p>
      <ul class="bullet-list"><li>Зрители не могут изменять фильтры, поэтому одна точка правды сохраняется автоматически.</li><li>Сессии можно архивировать напрямую из браузера, сохраняя хронологию инцидента.</li><li>WS-поток легко потребляется CI-ботами, которые реагируют на ключевые слова.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card fail">
        <div class="score-head">
          <h5>Соблюдение runbook</h5>
          <span class="score-delta">-10%</span>
        </div>
        <p class="score-value">69%</p>
        <p class="score-copy">Не все команды обновили CTA карточки под новые процедуры.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-094">
      <div class="page-header">
        <span class="page-index">Страница 094</span>
        <div>
          <p class="page-insight">Повысить прозрачность безопасности</p>
          <h2>Диагностический арсенал</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">WS трансляция</span><span class="chip">PG backup</span><span class="chip">Diff deployments</span>
      </div>
      <p class="lede">`ktl diag` покрывает квоты, CronJob, PodSecurity, storage и многое другое без написания скриптов.</p>
      <p>Команды `ktl diag quotas`, `ktl diag nodes`, `ktl diag storage`, `ktl diag cronjobs`, `ktl diag network` и `ktl diag podsecurity` формируют готовые таблицы. В сценарии «CI/CD контроль» они помогают быстро найти сдерживающий фактор и подготовить артефакты для постмортема.</p>
      <ul class="bullet-list"><li>`ktl diag resources` объединяет requests/limits с live metrics.</li><li>`ktl diag priorities` подсвечивает preemption и PriorityClasses.</li><li>`ktl diag report --html` строит визуальные scorecards по тем же данным.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Сетевые перехваты</h5>
          <span class="score-delta">+5 кейсов</span>
        </div>
        <p class="score-value">26 расследований</p>
        <p class="score-copy">Рост обращений к analyze traffic требует автоматизации фильтров.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-095">
      <div class="page-header">
        <span class="page-index">Страница 095</span>
        <div>
          <p class="page-insight">Синхронизировать инструменты SRE и разработчиков</p>
          <h2>Планирование деплоев</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Diag toolkit</span><span class="chip">Air-gap delivery</span><span class="chip">Informer tail <1s</span>
      </div>
      <p class="lede">`ktl deploy plan` визуализирует создаваемые, изменяемые и удаляемые манифесты до запуска установки.</p>
      <p>Команда сравнивает chart + values с текущим кластером и отмечает объекты, влияющие на поды. В рамках «Поддержка нескольких kubeconfig» это избавляет от непредсказуемых рестартов и ускоряет согласования с командами сопровождения.</p>
      <ul class="bullet-list"><li>Флаги `--chart`, `--release`, `--namespace`, `--values` повторяют семантику Helm.</li><li>HTML вывод (`--html --output dist/plan.html`) превращает результат в артефакт для стейкхолдеров.</li><li>Diff-формат подсвечивает изменения образов, env и PDB.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Поддержка нескольких kubeconfig</h3>
          <p>`ktl logs payments-api --context minikube` и `--kubeconfig ~/.kube/nonprod` позволяют переключаться между площадками без редактирования файлов.</p>
          <p>Команды разработки и эксплуатации работают в унифицированном UX без риска перепутать контекст.</p>
          <ul><li>Можно хранить конфиги в GitOps-хранилище и просто указывать путь.</li><li>Переменные `KTL_ALL_NAMESPACES` и др. задаются на уровне CI.</li><li>CLI явно пишет текущий context в заголовках отчёта.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие SBOM</h5>
          <span class="score-delta">+100%</span>
        </div>
        <p class="score-value">100% архивов</p>
        <p class="score-copy">Каждый `.k8s` содержит SPDX и license summary.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-096">
      <div class="page-header">
        <span class="page-index">Страница 096</span>
        <div>
          <p class="page-insight">Расширить air-gap канал поставки</p>
          <h2>Drift и снепшоты</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Quota heatmaps</span><span class="chip">CI gate</span><span class="chip">Node+pod журналы</span>
      </div>
      <p class="lede">`ktl logs drift watch` и `ktl diag snapshot save` непрерывно отслеживают расхождения манифестов.</p>
      <p>В сценарии «Формирование знаний» ktl фиксирует контрольные точки, а затем подсвечивает новые ReplicaSet, изменения хэшей и рестарты. Это основа для регрессной аналитики и аудита.</p>
      <ul class="bullet-list"><li>`ktl logs capture` записывает логи и события в переносимые tarball/SQLite артефакты.</li><li>`ktl logs capture replay` переигрывает инциденты офлайн.</li><li>Report HTML может сравнивать два снепшота (`--compare-left`, `--compare-right`).</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Формирование знаний</h3>
          <p>Runbook cards в insight-колонке содержат проверенные инструкции, ссылки и `cta.copy` кнопки.</p>
          <p>При инциденте каждый инженер действует по одинаковому сценарию, а HTML-файл служит источником обучения.</p>
          <ul><li>Кнопки копируют готовые `ktl diag ...` команды.</li><li>Карточки можно помечать `warn/fail` для приоритизации.</li><li>В PDF режиме карточки скрываются, отдавая место фактам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Покрытие бэкапами</h5>
          <span class="score-delta">0%</span>
        </div>
        <p class="score-value">100%</p>
        <p class="score-copy">Все критичные БД включены в ежедневные ktl db backup.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-097">
      <div class="page-header">
        <span class="page-index">Страница 097</span>
        <div>
          <p class="page-insight">Сократить MTTR благодаря автоматическим capture</p>
          <h2>SQLite-пакеты приложений</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">PodSecurity</span><span class="chip">Context aware</span><span class="chip">HTML зеркала</span>
      </div>
      <p class="lede">`ktl app package` собирает манифесты, образы, SBOM и аттестации в детерминированный `.k8s` файл.</p>
      <p>Подход SQLite гарантирует, что всё содержание доступно через стандартные `SELECT`. Для «Стабилизация checkout в prod-payments» это означает единый артефакт для air-gap кластеров и цепочки поставки.</p>
      <ul class="bullet-list"><li>Таблицы `metadata`, `manifests`, `images`, `attachments` покрывают весь спектр данных.</li><li>`ktl app package verify` проверяет Ed25519 подпись и вложенные SLSA/SBOM.</li><li>`ktl app unpack` извлекает снимки в файловую структуру.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Стабилизация checkout в prod-payments</h3>
          <p>Команда платёжного шлюза использует ktl, чтобы фиксировать деградации Checkout при пиковых распродажах. Логи подов `checkout-.*` сочетаются с `--highlight ERROR`, а HTML отчёт рассылается руководителям.</p>
          <p>В результате MTTR сократилось, а повторяемые рецепты помещены в runbook.</p>
          <ul><li>Поддерживается трансляция в браузер через `--ui`.</li><li>Node-логи рядом с приложением показывают проблемы kubelet.</li><li>Scorecards отслеживают прогресс по PodSecurity и квотам.</li></ul>
        </div>
        <div class="page-block">
          <h4>Цепочка команд для логирования и трансляции</h4>
          <pre><code>ktl logs 'checkout-.*' \
  --namespace prod-payments \
  --highlight ERROR --highlight timeout \
  --ui :8080 --ws-listen :9080</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Трафик TLS</h5>
          <span class="score-delta">+7 ms</span>
        </div>
        <p class="score-value">43 ms P95</p>
        <p class="score-copy">`ktl analyze traffic` показывает рост латентности между checkout и core API.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-098">
      <div class="page-header">
        <span class="page-index">Страница 098</span>
        <div>
          <p class="page-insight">Собрать хронологию для ретроспектив</p>
          <h2>Контроль поставки</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">CronJob guard</span><span class="chip">Color tokens</span><span class="chip">WS трансляция</span>
      </div>
      <p class="lede">Архив `.k8s` содержит provenance, лицензии и SBOM, поэтому аудиторы не требуют дополнительных выгрузок.</p>
      <p>В сценарии «Построение posture-отчёта» мы просто выполняем SQL-запросы к таблице `attachments`, чтобы доказать происхождение и состав релиза. Такая прозрачность редко встречается в проприетарных форматах.</p>
      <ul class="bullet-list"><li>SLSA JSON фиксирует BuildKit, git SHA и параметры запуска.</li><li>SBOM на базе SPDX 2.3 связывает каждый digest с лицензией.</li><li>License summary позволяет классифицировать copyleft/пермиссивные пакеты в секунды.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Построение posture-отчёта</h3>
          <p>`ktl diag report --html` собирает квоты, PodSecurity и readiness метрики в один дашборд, оформленный по DESIGN.md.</p>
          <p>Руководители получают консолидированное состояние кластера в виде презентабельного PDF.</p>
          <ul><li>Фильтры чипов выделяют namespace с проблемами.</li><li>Insight stack показывает таймлайн тревог.</li><li>Budget donuts дают мгновенную оценку headroom.</li></ul>
        </div>
        <div class="page-block">
          <h4>Пакетирование и проверка</h4>
          <pre><code>ktl app package \
  --chart ./deploy/checkout \
  --release checkout \
  --archive-file dist/checkout.k8s
ktl app package verify --archive-file dist/checkout.k8s</code></pre>
        </div>
      </div>
      <article class="score-card warn">
        <div class="score-head">
          <h5>Использование PVC</h5>
          <span class="score-delta">+4%</span>
        </div>
        <p class="score-value">88%</p>
        <p class="score-copy">Единичные namespace упираются в лимиты хранения.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-099">
      <div class="page-header">
        <span class="page-index">Страница 099</span>
        <div>
          <p class="page-insight">Перейти на SQL-first анализ</p>
          <h2>Вендоринг без дополнительных CLI</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Capture replay</span><span class="chip">Runbook CTA</span><span class="chip">Diag toolkit</span>
      </div>
      <p class="lede">`ktl app vendor` встраивает возможности vendir, поэтому синхронизация сторонних чартов происходит в одном бинарнике.</p>
      <p>В сценарии «Профилирование syscall» мы поддерживаем `vendir.yml`/`vendir.lock.yml`, подкачиваем Helm-чарты, git-каталоги и артефакты GitHub Releases без отдельного CLI и сложных установок.</p>
      <ul class="bullet-list"><li>Поддерживаются `--directory`, мульти-конфигурации (`-f`), `--locked` режим.</li><li>Уважает `VENDIR_CACHE_DIR`, `VENDIR_GITHUB_API_TOKEN` и другие env.</li><li>Результаты складываются в `testdata/charts/` для детерминированных тестов.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>Профилирование syscall</h3>
          <p>В пиковые часы API тормозит, поэтому команда запускает `ktl analyze syscalls` и выявляет блокировки на `openat`.</p>
          <p>Чёткая статистика по системным вызовам избавляет от долгих предположений.</p>
          <ul><li>JSON-вывод подключается к дашбордам.</li><li>Можно указать конкретный PID приложения.</li><li>Щадит производительность благодаря короткому окну сбора.</li></ul>
        </div>
        <div class="page-block">
          <h4>Syscall профилирование</h4>
          <pre><code>ktl analyze syscalls \
  --target payments/api-0 \
  --profile-duration 20s \
  --top 12 --match open,connect,execve</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Vendor sync SLA</h5>
          <span class="score-delta">+0.2%</span>
        </div>
        <p class="score-value">99.4%</p>
        <p class="score-copy">`ktl app vendor` интегрирован в nightly pipeline без аварий.</p>
      </article>
    </section>
    

    <section class="panel page" id="page-100">
      <div class="page-header">
        <span class="page-index">Страница 100</span>
        <div>
          <p class="page-insight">Автоматизировать вендоринг</p>
          <h2>PostgreSQL резервные копии</h2>
        </div>
      </div>
      <div class="chip-row">
        <span class="chip">Drift watch</span><span class="chip">Budget donuts</span><span class="chip">Quota heatmaps</span>
      </div>
      <p class="lede">`ktl db backup` и `ktl db restore` работают прямо из подов, исключая ручные `kubectl exec`.</p>
      <p>В сценарии «CI/CD контроль» инженер снимает дампы всех БД (если флаг `--database` не задан), а затем восстанавливает их с помощью `--drop-db` и `--yes` без скачивания внешних утилит.</p>
      <ul class="bullet-list"><li>Архивы автоматически сжимаются и именуются по времени.</li><li>Восстановление показывает прогресс по каждой базе.</li><li>Можно направлять выгрузки в каталог `backups/` или внешний bucket.</li></ul>
      <div class="page-flex">
        <div class="page-block">
          <h3>CI/CD контроль</h3>
          <p>`ktl diag health -A --json --fail-on warn` запускается как gate в CI, блокируя релисы, если scorecard проседает.</p>
          <p>Автоматическое принятие решений снижает человеческий фактор.</p>
          <ul><li>JSON протокол легко логируется.</li><li>Порог `--threshold` настраивается.</li><li>Можно параллельно запускать targeted tests.</li></ul>
        </div>
        <div class="page-block">
          <h4>Работа с шаблонами</h4>
          <pre><code>ktl logs auth --namespace corp-sec --template '{{printf "%s (%s/%s/%s/%s)\n" .Message .NodeName .Namespace .PodName .ContainerName}}'
ktl logs backend --template-file ~/.config/ktl/templates/minimal.tpl</code></pre>
        </div>
      </div>
      <article class="score-card pass">
        <div class="score-head">
          <h5>Доступность CronJob</h5>
          <span class="score-delta">+0.7%</span>
        </div>
        <p class="score-value">98.5%</p>
        <p class="score-copy">Расписания исполняются вовремя благодаря мониторингу ktl.</p>
      </article>
    </section>
    
  </div>
</body>
</html>
